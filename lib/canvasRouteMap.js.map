{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bcbae7ed3907742d1f29","webpack:///./src/astar.js","webpack:///./src/index.js","webpack:///./src/CanvasRouteMap.js","webpack:///./src/Canvas.js","webpack:///./src/RouteMap.js","webpack:///./src/BinaryHeap.js","webpack:///./src/Graph.js","webpack:///./src/GridNode.js","webpack:///./src/Point.js","webpack:///./src/loaders.js"],"names":["pathTo","node","curr","path","parent","unshift","getHeap","f","astar","search","graph","start","end","options","cleanDirty","heuristic","heuristics","manhattan","closest","openHeap","closestNode","h","push","size","currentNode","pop","closed","neighbors","i","il","length","neighbor","isWall","gScore","g","getCost","beenVisited","visited","markDirty","rescoreElement","pos0","pos1","d1","Math","abs","x","d2","y","diagonal","D","D2","sqrt","min","cleanNode","CanvasRouteMap","privateMethods","createMap","mapEntity","image","map","trackColor","mapCanvas","getMap","Object","keys","setOptions","startPointImage","startPointEntity","startPoint","width","height","drawPoint","getPoint","coordinates","position","endPointImage","endPointEntity","endPoint","createCanvas","canvasEntity","canvas","initialWidth","scale","zoom","getCanvas","isDrawPath","getPath","feetImage","feetEntity","route","animatePathWithImage","animateSpeed","step","animatePathWithDrawing","drawing","color","printWeight","container","append","url","initialization","initialize","call","callback","mouseEvents","mouseDown","e","r","getBoundingClientRect","mouseX","clientX","left","canvasPosition","deltaX","mouseY","clientY","top","deltaY","dragging","mouseUp","mouseMove","tmpCanvasPosX","tmpCanvasPosY","canvasEvents","updateCanvasAfterMove","mouseWheel","delta","wheelDelta","detail","canvasZoomX","canvasZoomY","zoomCount","clientZoom","zoomedX","zoomedY","initialImageWidth","updateCanvasAfterZoom","touchEvents","touchStart","touchX","touches","touchY","scaling","pinchStart","touchEnd","pinchEnd","touchMove","pinchMove","pinchDistStart","dist","touchClientX","touchClientY","pinchCounter","fluency","pinchZoomIn","pinchZoomOut","renderPath","pathBuffer","ctx","drawImage","fillRect","print","renderCanvas","clearRect","canvasWidth","newImageHeight","imageHeight","imageWidth","Canvas","canvasHeight","document","createElement","getContext","canvasCenterX","canvasCenterY","addEventListener","bind","imageCenterX","imageCenterY","imageXPos","imageYPos","speed","timerId","setInterval","clearInterval","setTimeout","fillStyle","RouteMap","b","getImageData","imageData","data","zeroesAndOnes","currentInnerArray","p","len","putImageData","arr","getBinaryArray","startCoordinate","grid","endCoordinate","BinaryHeap","scoreFunction","content","element","sinkDown","result","bubbleUp","indexOf","n","parentN","elemScore","child2N","child1N","swap","child1Score","child1","child2","child2Score","Graph","gridIn","nodes","row","init","dirtyNodes","ret","graphString","rowDebug","l","weight","join","GridNode","fromNeighbor","Point","loadImage","Promise","Image","resolve","src","crossOrigin"],"mappings":"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","file":"canvasRouteMap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"canvasRouteMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"canvasRouteMap\"] = factory();\n\telse\n\t\troot[\"canvasRouteMap\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bcbae7ed3907742d1f29","import BinaryHeap from './BinaryHeap.js';\n\nfunction pathTo(node){\n    let curr = node,\n        path = [];\n    while(curr.parent) {\n        path.unshift(curr);\n        curr = curr.parent;\n    }\n    return path;\n}\n\nfunction getHeap() {\n    return new BinaryHeap(function(node) {\n        return node.f;\n    });\n}\n\nexport const astar = {\n    search: function(graph, start, end, options) {\n        graph.cleanDirty();\n        options = options || {};\n        let heuristic = options.heuristic || astar.heuristics.manhattan,\n            closest = options.closest || false;\n\n        let openHeap = getHeap(),\n            closestNode = start; // set the start node to be the closest if required\n\n        start.h = heuristic(start, end);\n\n        openHeap.push(start);\n\n        while(openHeap.size() > 0) {\n\n            // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.\n            let currentNode = openHeap.pop();\n\n            // End case -- result has been found, return the traced path.\n            if(currentNode === end) {\n                return pathTo(currentNode);\n            }\n\n            // Normal case -- move currentNode from open to closed, process each of its neighbors.\n            currentNode.closed = true;\n\n            // Find all neighbors for the current node.\n            let neighbors = graph.neighbors(currentNode);\n\n            for (let i = 0, il = neighbors.length; i < il; ++i) {\n                let neighbor = neighbors[i];\n\n                if (neighbor.closed || neighbor.isWall()) {\n                    // Not a valid node to process, skip to next neighbor.\n                    continue;\n                }\n\n                // The g score is the shortest distance from start to current node.\n                // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\n                let gScore = currentNode.g + neighbor.getCost(currentNode),\n                    beenVisited = neighbor.visited;\n\n                if (!beenVisited || gScore < neighbor.g) {\n\n                    // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\n                    neighbor.visited = true;\n                    neighbor.parent = currentNode;\n                    neighbor.h = neighbor.h || heuristic(neighbor, end);\n                    neighbor.g = gScore;\n                    neighbor.f = neighbor.g + neighbor.h;\n                    graph.markDirty(neighbor);\n                    if (closest) {\n                        // If the neighbour is closer than the current closestNode or if it's equally close but has\n                        // a cheaper path than the current closest node then it becomes the closest node\n                        if (neighbor.h < closestNode.h || (neighbor.h === closestNode.h && neighbor.g < closestNode.g)) {\n                            closestNode = neighbor;\n                        }\n                    }\n\n                    if (!beenVisited) {\n                        // Pushing to heap will put it in proper place based on the 'f' value.\n                        openHeap.push(neighbor);\n                    }\n                    else {\n                        // Already seen the node, but since it has been rescored we need to reorder it in the heap\n                        openHeap.rescoreElement(neighbor);\n                    }\n                }\n            }\n        }\n\n        if (closest) {\n            return pathTo(closestNode);\n        }\n\n        // No result was found - empty array signifies failure to find path.\n        return [];\n    },\n    // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html\n    heuristics: {\n        manhattan: function(pos0, pos1) {\n            let d1 = Math.abs(pos1.x - pos0.x);\n            var d2 = Math.abs(pos1.y - pos0.y);\n            return d1 + d2;\n        },\n        diagonal: function(pos0, pos1) {\n            let D = 1;\n            let D2 = Math.sqrt(2);\n            let d1 = Math.abs(pos1.x - pos0.x);\n            let d2 = Math.abs(pos1.y - pos0.y);\n            return (D * (d1 + d2)) + ((D2 - (2 * D)) * Math.min(d1, d2));\n        }\n    },\n    cleanNode:function(node){\n        node.f = 0;\n        node.g = 0;\n        node.h = 0;\n        node.visited = false;\n        node.closed = false;\n        node.parent = null;\n    }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/astar.js","import CanvasRouteMap from './CanvasRouteMap.js';\nexport { CanvasRouteMap };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Canvas from './Canvas.js';\nimport RouteMap from './RouteMap.js';\nimport Point from './Point.js';\nimport {loadImage} from './loaders.js';\n\nconst privateMethods = {\n  createMap() {\n    this.mapEntity = new RouteMap(this.image, this.options.map.trackColor, this.options.map.diagonal);\n    this.mapCanvas = this.mapEntity.getMap();\n\n    if (Object.keys(this.options.map).length) {\n      this.mapEntity.setOptions(this.options.map);\n\n      if (this.startPointImage) {\n        const startPointEntity = new Point(this.startPointImage, this.options.map.startPoint.image.width, this.options.map.startPoint.image.height);\n        this.mapEntity.drawPoint(startPointEntity.getPoint(), this.options.map.startPoint.coordinates.x, this.options.map.startPoint.coordinates.y, this.options.map.startPoint.image.position);\n      }\n      if (this.endPointImage) {\n        const endPointEntity = new Point(this.endPointImage, this.options.map.endPoint.image.width, this.options.map.endPoint.image.height);\n        this.mapEntity.drawPoint(endPointEntity.getPoint(), this.options.map.endPoint.coordinates.x, this.options.map.endPoint.coordinates.y, this.options.map.endPoint.image.position);\n      }\n    }\n  },\n  createCanvas() {\n    this.canvasEntity = new Canvas(this.mapCanvas, this.options.canvas.width, this.options.canvas.height, this.options.canvas.initialWidth, this.options.canvas.scale, this.options.canvas.zoom);\n    this.canvas = this.canvasEntity.getCanvas();\n\n    if (this.isDrawPath) {\n      const path = this.mapEntity.getPath();\n      if (this.feetImage) {\n        this.feetEntity = new Point(this.feetImage, this.options.map.route.image.width, this.options.map.route.image.height);\n        this.canvasEntity.animatePathWithImage(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.feetEntity.getPoint());\n      } else {\n        this.canvasEntity.animatePathWithDrawing(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.options.map.route.drawing.color, this.options.map.route.drawing.printWeight);\n      }\n    }\n\n    this.container.append(this.canvas);\n\n  }\n};\n\nexport default class CanvasRouteMap {\n  constructor(options) {\n    if (!options || !options.container || !options.url) {\n      throw 'CanvasRouteMap constructor: missing argument container or url';\n    }\n\n    this.container = options.container;\n    this.url = options.url;\n\n    this.options = {};\n    this.options.canvas = options.canvas || {};\n    this.options.map = options.map || {};\n\n    this.options.map.startPoint = this.options.map.startPoint || {};\n    if (Object.keys(this.options.map.startPoint).length && !this.options.map.startPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in startPoint';\n    }\n\n    this.options.map.endPoint = this.options.map.endPoint || {};\n    if (Object.keys(this.options.map.endPoint).length && !this.options.map.endPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in endPoint';\n    }\n\n    this.isDrawPath = Object.keys(this.options.map.startPoint).length && Object.keys(this.options.map.endPoint).length;\n\n    this.options.map.route = this.options.map.route || {};\n\n    this.options.map.route.drawing = this.options.map.route.drawing || {};\n    this.options.map.route.image = this.options.map.route.image || {};\n\n    this.initialization = (async () => {\n      this.image = await loadImage(this.url);\n\n      if (this.options.map.startPoint.image) {\n        this.startPointImage = await loadImage(this.options.map.startPoint.image.url);\n      }\n      if (this.options.map.endPoint.image) {\n        this.endPointImage = await loadImage(this.options.map.endPoint.image.url);\n      }\n      if (this.options.map.route.image.url) {\n        this.feetImage = await loadImage(this.options.map.route.image.url);\n      }\n    })();\n\n    this.initialize();\n  }\n\n  async initialize() {\n    await this.initialization;\n    privateMethods.createMap.call(this);\n    privateMethods.createCanvas.call(this);\n  }\n\n  async ready(callback) {\n    await this.initialization;\n    callback.call(this);\n  }\n}\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/CanvasRouteMap.js","const mouseEvents = {\n  mouseDown(e) {\n    // get the current mouse position\n    let r = this.canvas.getBoundingClientRect();\n    this.mouseX = (e.clientX - r.left) - this.canvasPosition.deltaX;\n    this.mouseY = (e.clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n  },\n  mouseUp() {\n    this.dragging = false;\n  },\n  mouseMove(e) {\n    if (this.dragging) {\n      // get the current mouse position (updates every time the mouse is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.clientX - r.left;\n      let y = e.clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.mouseX); // total distance in x\n      this.tmpCanvasPosY = (y - this.mouseY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    }\n  },\n  mouseWheel(e) {\n    let delta = 0;\n    let r = this.canvas.getBoundingClientRect();\n\n    if (e.wheelDelta) {\n      delta = e.wheelDelta / 120;\n    }\n    else if (e.detail) {\n      delta = -e.detail / 3;\n    }\n\n    let canvasZoomX = (e.clientX - r.left);\n    let canvasZoomY = (e.clientY - r.top);\n\n    if (delta > 0) {\n      if (this.zoomCount < this.clientZoom) {\n        this.zoomCount += 1;\n\n        // pinchZoomInG IN\n        this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n        this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n        // scale the image up by 2\n        this.initialImageWidth = this.initialImageWidth * 2;\n        this.zoom = this.zoom * 2;\n      }\n    } else {\n      if (this.zoomCount > -this.clientZoom) {\n        this.zoomCount -= 1;\n\n        // pinchZoomInG OUT\n        this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n        this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n        // scale the image down by 2\n        this.initialImageWidth = this.initialImageWidth / 2;\n        this.zoom = this.zoom / 2;\n      }\n    }\n    canvasEvents.updateCanvasAfterZoom.call(this);\n  },\n};\n\nconst touchEvents = {\n  touchStart(e) {\n    // get the current touch position\n    let r = this.canvas.getBoundingClientRect();\n    this.touchX = (e.touches[0].clientX - r.left) - this.canvasPosition.deltaX;\n    this.touchY = (e.touches[0].clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n\n    if (e.touches.length === 2) {\n      this.scaling = true;\n      this.dragging = false;\n      touchEvents.pinchStart.call(this, e);\n    }\n  },\n  touchEnd() {\n    this.dragging = false;\n    if (this.scaling) {\n      touchEvents.pinchEnd.call(this);\n    }\n  },\n  touchMove(e) {\n    if (this.dragging) {\n      // get the current touch position (updates every time the touch is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.touches[0].clientX - r.left;\n      let y = e.touches[0].clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.touchX); // total distance in x\n      this.tmpCanvasPosY = (y - this.touchY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    } else if (this.scaling) {\n      touchEvents.pinchMove.call(this, e);\n    }\n  },\n  pinchStart(e) {\n    this.pinchDistStart = Math.sqrt(\n        (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n        (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n  },\n  pinchEnd() {\n    this.scaling = false;\n  },\n  pinchMove(e) {\n    let r = this.canvas.getBoundingClientRect();\n\n    let dist = Math.sqrt(\n        (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n        (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n\n    let touchClientX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n    let touchClientY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n\n    let canvasZoomX = (touchClientX - r.left);\n    let canvasZoomY = (touchClientY - r.top);\n\n    this.pinchCounter += 1;\n    if (this.pinchCounter === this.fluency) {\n      this.pinchCounter = 0;\n      if (this.pinchDistStart - dist < 0) {\n        if (this.zoomCount < 2) {\n          touchEvents.pinchZoomIn.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom * 2;\n          this.zoomCount += 1;\n        }\n      }\n      else {\n        if (this.zoomCount > -2) {\n          touchEvents.pinchZoomOut.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom / 2;\n          this.zoomCount -= 1;\n        }\n      }\n      canvasEvents.updateCanvasAfterZoom.call(this);\n    }\n  },\n  pinchZoomIn(canvasZoomX, canvasZoomY) {\n    this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n    this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n    this.initialImageWidth = this.initialImageWidth * 2;\n  },\n  pinchZoomOut(canvasZoomX, canvasZoomY) {\n    this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n    this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n    this.initialImageWidth = this.initialImageWidth / 2;\n  },\n};\n\n\nconst canvasEvents = {\n  renderPath() {\n    for (let i = 0; i < this.pathBuffer.length; i += 1) {\n      if (this.feetImage) {\n        this.ctx.drawImage(this.feetImage, (this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n      } else {\n        this.ctx.fillRect((this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n      }\n    }\n  },\n  renderCanvas() {\n    // we need to clear the canvas, otherwise we'll have a bunch of overlapping images\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasWidth);\n\n    // these will be our new x,y position to move the image.\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n  },\n  updateCanvasAfterMove() {\n    //restrict canvas area\n    if (this.tmpCanvasPosX > (this.initialImageWidth / this.zoom - this.initialImageWidth * 0.2 / this.zoom) ||\n        (this.tmpCanvasPosX < -(this.initialImageWidth - this.initialImageWidth * 0.2)) ||\n        (this.tmpCanvasPosY > (this.newImageHeight / this.zoom - this.newImageHeight * 0.2 / this.zoom)) ||\n        (this.tmpCanvasPosY < -(this.newImageHeight - this.newImageHeight * 0.2))\n    ) {\n      return false;\n    }\n\n    this.canvasPosition.deltaX = this.tmpCanvasPosX;\n    this.canvasPosition.deltaY = this.tmpCanvasPosY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n  },\n  updateCanvasAfterZoom() {\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    // update the new canvas position\n    this.canvasPosition.deltaX = this.zoomedX;\n    this.canvasPosition.deltaY = this.zoomedY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n  },\n};\n\nexport default class Canvas {\n  constructor(image,\n              canvasWidth = 600,\n              canvasHeight = 600,\n              initialImageWidth = 1080,\n              scale = true,\n              zoom = 2) {\n\n    this.image = image;\n    this.imageWidth = image.width;\n    this.imageHeight = image.height;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.initialImageWidth = initialImageWidth;\n    this.scale = scale;\n    this.clientZoom = zoom;\n\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    this.canvasCenterX = this.canvasWidth / 2;\n    this.canvasCenterY = this.canvasHeight / 2;\n\n    this.canvasPosition = {\n      deltaX: 0,\n      deltaY: 0\n    };\n\n    this.pinchCounter = 0;\n    this.fluency = 5;\n    this.zoom = 1;\n    this.zoomCount = 0;\n    this.pathBuffer = [];\n\n    this.dragging = false;\n\n    if (this.scale) {\n      this.canvas.addEventListener('touchstart', touchEvents.touchStart.bind(this));\n      this.canvas.addEventListener('touchmove', touchEvents.touchMove.bind(this));\n      this.canvas.addEventListener('touchend', touchEvents.touchEnd.bind(this));\n\n      this.canvas.addEventListener('mousedown', mouseEvents.mouseDown.bind(this));\n      this.canvas.addEventListener('mousemove', mouseEvents.mouseMove.bind(this));\n      this.canvas.addEventListener('mouseup', mouseEvents.mouseUp.bind(this));\n      this.canvas.addEventListener('mousewheel', mouseEvents.mouseWheel.bind(this));\n      this.canvas.addEventListener('DOMMouseScroll', mouseEvents.mouseWheel.bind(this));\n    }\n  }\n\n  getCanvas() {\n    this.canvas.width = this.canvasWidth;\n    this.canvas.height = this.canvasHeight;\n\n    // center of the image currently\n    let imageCenterX = this.initialImageWidth / 2;\n    let imageCenterY = this.newImageHeight / 2;\n\n    // subtract the canvas size by the image center, that's how far we need to move it.\n    this.imageXPos = this.canvasCenterX - imageCenterX;\n    this.imageYPos = this.canvasCenterY - imageCenterY;\n\n    this.canvasPosition.deltaX = this.imageXPos;\n    this.canvasPosition.deltaY = this.imageYPos;\n\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            this.imageXPos,\n            this.imageYPos,\n            this.initialImageWidth,\n            this.newImageHeight);\n\n    return this.canvas;\n  }\n\n  animatePathWithImage(path, speed = 50, step = 20, image) {\n    this.feetImage = image;\n    let i = 0;\n    let timerId = setInterval(() => {\n      this.pathBuffer.push(path[i]);\n      if (this.feetImage) {\n        this.ctx.drawImage(this.feetImage, (path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n      } else {\n        this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n      }\n\n      if (i + step >= path.length) clearInterval(timerId);\n      i += step;\n    }, speed);\n\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n    this.pathBuffer = [];\n\n    setTimeout(this.animatePathWithImage.bind(this, path, speed, step, image), path.length * speed / 10);\n\n  }\n\n  animatePathWithDrawing(path, speed = 50, step = 20, color = '#f00', printWeight = 3) {\n    this.print = printWeight;\n\n    let i = 0;\n    let timerId = setInterval(() => {\n      this.pathBuffer.push(path[i]);\n      this.ctx.fillStyle = color;\n      this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n\n      if (i + step >= path.length) clearInterval(timerId);\n      i += step;\n    }, speed);\n\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n    this.pathBuffer = [];\n\n    setTimeout(this.animatePathWithDrawing.bind(this, path, speed, step, color, printWeight), path.length * speed / 10);\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Canvas.js","import {astar} from'./astar.js';\nimport Graph from './Graph.js';\n\nexport default class RouteMap {\n  constructor(image, trackColor = {r: 255, g: 255, b: 255}, diagonal = true) {\n    this.image = image;\n    this.width = image.width;\n    this.height = image.height;\n    this.trackColor = trackColor;\n    this.diagonal = diagonal;\n\n  }\n\n  getMap(x = 0, y = 0) {\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            x * this.width,\n            y * this.height,\n            this.width,\n            this.height,\n            0,\n            0,\n            this.width,\n            this.height);\n\n    return this.canvas;\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getBinaryArray() {\n    const width = this.canvas.width % 2 === 0 ? this.canvas.width - 1 : this.canvas.width;\n    const height = this.canvas.height;\n    const map = this.ctx.getImageData(0, 0, width, height);\n    let imageData = map.data;\n    let r, g, b;\n    let zeroesAndOnes = [];\n    let currentInnerArray = [];\n\n    for (let p = 0, len = imageData.length; p < len; p += 4) {\n      r = imageData[p];\n      g = imageData[p + 1];\n      b = imageData[p + 2];\n\n      if (p % width * 4 === 0) {\n        currentInnerArray = [];\n        zeroesAndOnes.push(currentInnerArray);\n      }\n      if (r === this.trackColor.r && g === this.trackColor.g && b === this.trackColor.b) {\n        currentInnerArray.push(1);\n      } else {\n        currentInnerArray.push(0);\n      }\n    }\n    this.ctx.putImageData(map, 0, 0);\n\n    return zeroesAndOnes;\n  }\n\n  getPath() {\n    const arr = this.getBinaryArray();\n    let graph = new Graph(arr, {diagonal: this.options.diagonal});\n    let startCoordinate = graph.grid[this.options.startPoint.coordinates.y][this.options.startPoint.coordinates.x];\n    let endCoordinate = graph.grid[this.options.endPoint.coordinates.y][this.options.endPoint.coordinates.x];\n\n    return astar.search(graph, startCoordinate, endCoordinate);\n  }\n\n  drawPoint(image, x, y, position = 'up') {\n    let coordinates = {};\n\n    switch (position) {\n      case 'up':\n        coordinates.x = x - image.width / 2;\n        coordinates.y = y - image.height;\n        break;\n      case 'center':\n        coordinates.x = x;\n        coordinates.y = y;\n        break;\n    }\n\n    this.ctx\n        .drawImage(\n            image,\n            coordinates.x,\n            coordinates.y,\n            image.width,\n            image.height);\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RouteMap.js","export default class BinaryHeap {\n  constructor(scoreFunction) {\n    this.content = [];\n    this.scoreFunction = scoreFunction;\n  }\n\n  push(element) {\n    // Add the new element to the end of the array.\n    this.content.push(element);\n\n    // Allow it to sink down.\n    this.sinkDown(this.content.length - 1);\n  }\n\n  pop() {\n    // Store the first element so we can return it later.\n    let result = this.content[0];\n    // Get the element at the end of the array.\n    let end = this.content.pop();\n    // If there are any elements left, put the end element at the\n    // start, and let it bubble up.\n    if (this.content.length > 0) {\n      this.content[0] = end;\n      this.bubbleUp(0);\n    }\n    return result;\n  }\n\n  remove(node) {\n    let i = this.content.indexOf(node);\n\n    // When it is found, the process seen in 'pop' is repeated\n    // to fill up the hole.\n    let end = this.content.pop();\n\n    if (i !== this.content.length - 1) {\n      this.content[i] = end;\n\n      if (this.scoreFunction(end) < this.scoreFunction(node)) {\n        this.sinkDown(i);\n      }\n      else {\n        this.bubbleUp(i);\n      }\n    }\n  }\n\n  size() {\n    return this.content.length;\n  }\n\n  rescoreElement(node) {\n    this.sinkDown(this.content.indexOf(node));\n  }\n\n  sinkDown(n) {\n    // Fetch the element that has to be sunk.\n    let element = this.content[n];\n\n    // When at 0, an element can not sink any further.\n    while (n > 0) {\n\n      // Compute the parent element's index, and fetch it.\n      let parentN = ((n + 1) >> 1) - 1,\n        parent = this.content[parentN];\n      // Swap the elements if the parent is greater.\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n        this.content[parentN] = element;\n        this.content[n] = parent;\n        // Update 'n' to continue at the new position.\n        n = parentN;\n      }\n      // Found a parent that is less, no need to sink any further.\n      else {\n        break;\n      }\n    }\n  }\n\n  bubbleUp(n) {\n    // Look up the target element and its score.\n    let length = this.content.length,\n      element = this.content[n],\n      elemScore = this.scoreFunction(element);\n\n    while (true) {\n      // Compute the indices of the child elements.\n      let child2N = (n + 1) << 1,\n        child1N = child2N - 1;\n      // This is used to store the new position of the element, if any.\n      let swap = null,\n        child1Score;\n      // If the first child exists (is inside the array)...\n      if (child1N < length) {\n        // Look it up and compute its score.\n        let child1 = this.content[child1N];\n        child1Score = this.scoreFunction(child1);\n\n        // If the score is less than our element's, we need to swap.\n        if (child1Score < elemScore) {\n          swap = child1N;\n        }\n      }\n\n      // Do the same checks for the other child.\n      if (child2N < length) {\n        let child2 = this.content[child2N],\n          child2Score = this.scoreFunction(child2);\n        if (child2Score < (swap === null ? elemScore : child1Score)) {\n          swap = child2N;\n        }\n      }\n\n      // If the element needs to be moved, swap it, and continue.\n      if (swap !== null) {\n        this.content[n] = this.content[swap];\n        this.content[swap] = element;\n        n = swap;\n      }\n      // Otherwise, we are done.\n      else {\n        break;\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BinaryHeap.js","import GridNode from './GridNode.js';\nimport {astar} from'./astar.js';\n\nexport default class Graph {\n  constructor(gridIn, options) {\n    options = options || {};\n    this.nodes = [];\n    this.diagonal = !!options.diagonal;\n    this.grid = [];\n    for (let x = 0; x < gridIn.length; x++) {\n      this.grid[x] = [];\n\n      for (let y = 0, row = gridIn[x]; y < row.length; y++) {\n        let node = new GridNode(x, y, row[y]);\n        this.grid[x][y] = node;\n        this.nodes.push(node);\n      }\n    }\n    this.init.call(this);\n  }\n\n  init() {\n    this.dirtyNodes = [];\n    for (let i = 0; i < this.nodes.length; i++) {\n      astar.cleanNode(this.nodes[i]);\n    }\n  }\n\n  cleanDirty() {\n    for (let i = 0; i < this.dirtyNodes.length; i++) {\n      astar.cleanNode(this.dirtyNodes[i]);\n    }\n    this.dirtyNodes = [];\n  }\n\n  markDirty(node) {\n    this.dirtyNodes.push(node);\n  }\n\n  neighbors(node) {\n    let ret = [],\n      x = node.x,\n      y = node.y,\n      grid = this.grid;\n\n    // West\n    if (grid[x - 1] && grid[x - 1][y]) {\n      ret.push(grid[x - 1][y]);\n    }\n\n    // East\n    if (grid[x + 1] && grid[x + 1][y]) {\n      ret.push(grid[x + 1][y]);\n    }\n\n    // South\n    if (grid[x] && grid[x][y - 1]) {\n      ret.push(grid[x][y - 1]);\n    }\n\n    // North\n    if (grid[x] && grid[x][y + 1]) {\n      ret.push(grid[x][y + 1]);\n    }\n\n    if (this.diagonal) {\n      // Southwest\n      if (grid[x - 1] && grid[x - 1][y - 1]) {\n        ret.push(grid[x - 1][y - 1]);\n      }\n\n      // Southeast\n      if (grid[x + 1] && grid[x + 1][y - 1]) {\n        ret.push(grid[x + 1][y - 1]);\n      }\n\n      // Northwest\n      if (grid[x - 1] && grid[x - 1][y + 1]) {\n        ret.push(grid[x - 1][y + 1]);\n      }\n\n      // Northeast\n      if (grid[x + 1] && grid[x + 1][y + 1]) {\n        ret.push(grid[x + 1][y + 1]);\n      }\n    }\n\n    return ret;\n  }\n\n  toString() {\n    let graphString = [],\n      nodes = this.grid, // when using grid\n      rowDebug, row, y, l;\n    for (let x = 0, len = nodes.length; x < len; x++) {\n      rowDebug = [];\n      row = nodes[x];\n      for (y = 0, l = row.length; y < l; y++) {\n        rowDebug.push(row[y].weight);\n      }\n      graphString.push(rowDebug.join(\" \"));\n    }\n    return graphString.join(\"\\n\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Graph.js","export default class GridNode {\n  constructor(x, y, weight) {\n    this.x = x;\n    this.y = y;\n    this.weight = weight;\n  }\n\n  toString() {\n    return \"[\" + this.x + \" \" + this.y + \"]\";\n  }\n\n  getCost(fromNeighbor) {\n    // Take diagonal weight into consideration.\n    if (fromNeighbor && fromNeighbor.x != this.x && fromNeighbor.y != this.y) {\n      return this.weight * 1.41421;\n    }\n    return this.weight;\n  }\n\n  isWall() {\n    return this.weight === 0;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/GridNode.js","export default class Point {\n  constructor(image, width, height) {\n    this.image = image;\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = width || this.image.width;\n    this.canvas.height = height || this.image.height;\n  }\n\n  getPoint() {\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            0,\n            0,\n            this.canvas.width,\n            this.canvas.height);\n    return this.canvas;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Point.js","export function loadImage(url) {\n  return new Promise(resolve => {\n    const image = new Image();\n\n    image.addEventListener('load', () => {\n      resolve(image);\n    });\n    image.src = url;\n    image.crossOrigin = 'Anonymous';\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders.js"],"sourceRoot":""}
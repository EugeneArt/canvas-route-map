{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b8c819f077781270f9b7","webpack:///./src/index.js","webpack:///./src/CanvasRouteMap.js","webpack:///./src/Canvas.js","webpack:///./src/RouteMap.js","webpack:///./src/astar.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/Point.js","webpack:///./src/loaders.js"],"names":["CanvasRouteMap","privateMethods","createMap","mapEntity","image","options","map","trackColor","diagonal","mapCanvas","getMap","Object","keys","length","setOptions","startPointImage","startPointEntity","startPoint","width","height","drawPoint","getPoint","coordinates","x","y","position","endPointImage","endPointEntity","endPoint","createCanvas","canvasEntity","canvas","initialWidth","scale","zoom","getCanvas","isDrawPath","path","getPath","feetImage","feetEntity","route","animatePathWithImage","animateSpeed","step","animatePathWithDrawing","drawing","color","printWeight","container","append","url","initialization","initialize","call","mouseEvents","mouseDown","e","r","getBoundingClientRect","mouseX","clientX","left","canvasPosition","deltaX","mouseY","clientY","top","deltaY","dragging","mouseUp","mouseMove","tmpCanvasPosX","tmpCanvasPosY","canvasEvents","updateCanvasAfterMove","mouseWheel","delta","wheelDelta","detail","canvasZoomX","canvasZoomY","zoomCount","clientZoom","zoomedX","zoomedY","initialImageWidth","updateCanvasAfterZoom","touchEvents","touchStart","touchX","touches","touchY","scaling","pinchStart","touchEnd","pinchEnd","touchMove","pinchMove","pinchDistStart","Math","sqrt","dist","touchClientX","touchClientY","pinchCounter","fluency","pinchZoomIn","pinchZoomOut","renderPath","i","pathBuffer","ctx","drawImage","fillRect","print","renderCanvas","clearRect","canvasWidth","newImageHeight","imageHeight","imageWidth","Canvas","canvasHeight","document","createElement","getContext","canvasCenterX","canvasCenterY","addEventListener","bind","imageCenterX","imageCenterY","imageXPos","imageYPos","speed","timerId","setInterval","push","clearInterval","setTimeout","fillStyle","RouteMap","g","b","getImageData","imageData","data","zeroesAndOnes","currentInnerArray","p","len","putImageData","arr","getBinaryArray","graph","Graph","startCoordinate","grid","endCoordinate","astar","search","definition","module","exports","define","window","pathTo","node","curr","parent","unshift","getHeap","BinaryHeap","f","start","end","cleanDirty","heuristic","heuristics","manhattan","closest","openHeap","closestNode","h","size","currentNode","pop","closed","neighbors","il","neighbor","isWall","gScore","getCost","beenVisited","visited","markDirty","rescoreElement","pos0","pos1","d1","abs","d2","D","D2","min","cleanNode","gridIn","nodes","row","GridNode","init","prototype","dirtyNodes","ret","toString","graphString","rowDebug","l","weight","join","fromNeighbor","scoreFunction","content","element","sinkDown","result","bubbleUp","remove","indexOf","n","parentN","elemScore","child2N","child1N","swap","child1Score","child1","child2","child2Score","Point","loadImage","Promise","Image","resolve","src","crossOrigin"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC7DA;;;;;;QACSA,c;;;;;;;;;;;;;;;ACDT;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMC,iBAAiB;AACrBC,WADqB,uBACT;AACV,SAAKC,SAAL,GAAiB,uBAAa,KAAKC,KAAlB,EAAyB,KAAKC,OAAL,CAAaC,GAAb,CAAiBC,UAA1C,EAAsD,KAAKF,OAAL,CAAaC,GAAb,CAAiBE,QAAvE,CAAjB;AACA,SAAKC,SAAL,GAAiB,KAAKN,SAAL,CAAeO,MAAf,EAAjB;;AAEA,QAAIC,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAaC,GAAzB,EAA8BO,MAAlC,EAA0C;AACxC,WAAKV,SAAL,CAAeW,UAAf,CAA0B,KAAKT,OAAL,CAAaC,GAAvC;;AAEA,UAAI,KAAKS,eAAT,EAA0B;AACxB,YAAMC,mBAAmB,oBAAU,KAAKD,eAAf,EAAgC,KAAKV,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4Bb,KAA5B,CAAkCc,KAAlE,EAAyE,KAAKb,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4Bb,KAA5B,CAAkCe,MAA3G,CAAzB;AACA,aAAKhB,SAAL,CAAeiB,SAAf,CAAyBJ,iBAAiBK,QAAjB,EAAzB,EAAsD,KAAKhB,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4BK,WAA5B,CAAwCC,CAA9F,EAAiG,KAAKlB,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4BK,WAA5B,CAAwCE,CAAzI,EAA4I,KAAKnB,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4Bb,KAA5B,CAAkCqB,QAA9K;AACD;AACD,UAAI,KAAKC,aAAT,EAAwB;AACtB,YAAMC,iBAAiB,oBAAU,KAAKD,aAAf,EAA8B,KAAKrB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BxB,KAA1B,CAAgCc,KAA9D,EAAqE,KAAKb,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BxB,KAA1B,CAAgCe,MAArG,CAAvB;AACA,aAAKhB,SAAL,CAAeiB,SAAf,CAAyBO,eAAeN,QAAf,EAAzB,EAAoD,KAAKhB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BN,WAA1B,CAAsCC,CAA1F,EAA6F,KAAKlB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BN,WAA1B,CAAsCE,CAAnI,EAAsI,KAAKnB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BxB,KAA1B,CAAgCqB,QAAtK;AACD;AACF;AACF,GAjBoB;AAkBrBI,cAlBqB,0BAkBN;AACb,SAAKC,YAAL,GAAoB,qBAAW,KAAKrB,SAAhB,EAA2B,KAAKJ,OAAL,CAAa0B,MAAb,CAAoBb,KAA/C,EAAsD,KAAKb,OAAL,CAAa0B,MAAb,CAAoBZ,MAA1E,EAAkF,KAAKd,OAAL,CAAa0B,MAAb,CAAoBC,YAAtG,EAAoH,KAAK3B,OAAL,CAAa0B,MAAb,CAAoBE,KAAxI,EAA+I,KAAK5B,OAAL,CAAa0B,MAAb,CAAoBG,IAAnK,CAApB;AACA,SAAKH,MAAL,GAAc,KAAKD,YAAL,CAAkBK,SAAlB,EAAd;;AAEA,QAAI,KAAKC,UAAT,EAAqB;AACnB,UAAMC,OAAO,KAAKlC,SAAL,CAAemC,OAAf,EAAb;AACA,UAAI,KAAKC,SAAT,EAAoB;AAClB,aAAKC,UAAL,GAAkB,oBAAU,KAAKD,SAAf,EAA0B,KAAKlC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBrC,KAAvB,CAA6Bc,KAAvD,EAA8D,KAAKb,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBrC,KAAvB,CAA6Be,MAA3F,CAAlB;AACA,aAAKW,YAAL,CAAkBY,oBAAlB,CAAuCL,IAAvC,EAA6C,KAAKhC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBE,YAApE,EAAkF,KAAKtC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBG,IAAzG,EAA+G,KAAKJ,UAAL,CAAgBnB,QAAhB,EAA/G;AACD,OAHD,MAGO;AACL,aAAKS,YAAL,CAAkBe,sBAAlB,CAAyCR,IAAzC,EAA+C,KAAKhC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBE,YAAtE,EAAoF,KAAKtC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBG,IAA3G,EAAiH,KAAKvC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBK,OAAvB,CAA+BC,KAAhJ,EAAuJ,KAAK1C,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBK,OAAvB,CAA+BE,WAAtL;AACD;AACF;;AAED,SAAKC,SAAL,CAAeC,MAAf,CAAsB,KAAKnB,MAA3B;AACD;AAjCoB,CAAvB;;IAoCqB/B,c;AACnB,0BAAYK,OAAZ,EAAqB;AAAA;;AAAA;;AACnB,QAAI,CAACA,OAAD,IAAY,CAACA,QAAQ4C,SAArB,IAAkC,CAAC5C,QAAQ8C,GAA/C,EAAoD;AAClD,YAAM,+DAAN;AACD;;AAED,SAAKF,SAAL,GAAiB5C,QAAQ4C,SAAzB;AACA,SAAKE,GAAL,GAAW9C,QAAQ8C,GAAnB;;AAEA,SAAK9C,OAAL,GAAe,EAAf;AACA,SAAKA,OAAL,CAAa0B,MAAb,GAAsB1B,QAAQ0B,MAAR,IAAkB,EAAxC;AACA,SAAK1B,OAAL,CAAaC,GAAb,GAAmBD,QAAQC,GAAR,IAAe,EAAlC;;AAEA,SAAKD,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,GAA8BZ,QAAQC,GAAR,CAAYW,UAAZ,IAA0B,EAAxD;AACA,QAAIN,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAaC,GAAb,CAAiBW,UAA7B,EAAyCJ,MAAzC,IAAmD,CAAC,KAAKR,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4BK,WAApF,EAAiG;AAC/F,YAAM,wEAAN;AACD;;AAED,SAAKjB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,GAA4BvB,QAAQC,GAAR,CAAYsB,QAAZ,IAAwB,EAApD;AACA,QAAIjB,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAaC,GAAb,CAAiBsB,QAA7B,EAAuCf,MAAvC,IAAiD,CAAC,KAAKR,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BN,WAAhF,EAA6F;AAC3F,YAAM,sEAAN;AACD;;AAED,SAAKc,UAAL,GAAkBzB,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAaC,GAAb,CAAiBW,UAA7B,EAAyCJ,MAAzC,IAAmDF,OAAOC,IAAP,CAAY,KAAKP,OAAL,CAAaC,GAAb,CAAiBsB,QAA7B,EAAuCf,MAA5G;;AAEA,SAAKR,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,GAAyBpC,QAAQC,GAAR,CAAYmC,KAAZ,IAAqB,EAA9C;;AAEA,SAAKpC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBK,OAAvB,GAAiCzC,QAAQC,GAAR,CAAYmC,KAAZ,CAAkBK,OAAlB,IAA6B,EAA9D;AACA,SAAKzC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBrC,KAAvB,GAA+BC,QAAQC,GAAR,CAAYmC,KAAZ,CAAkBrC,KAAlB,IAA2B,EAA1D;;AAEA,SAAKgD,cAAL,GAAuB,kBAAY;AACjC,YAAKhD,KAAL,GAAa,MAAM,wBAAU,MAAK+C,GAAf,CAAnB;;AAEA,UAAI,MAAK9C,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4Bb,KAAhC,EAAuC;AACrC,cAAKW,eAAL,GAAuB,MAAM,wBAAU,MAAKV,OAAL,CAAaC,GAAb,CAAiBW,UAAjB,CAA4Bb,KAA5B,CAAkC+C,GAA5C,CAA7B;AACD;AACD,UAAI,MAAK9C,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BxB,KAA9B,EAAqC;AACnC,cAAKsB,aAAL,GAAqB,MAAM,wBAAU,MAAKrB,OAAL,CAAaC,GAAb,CAAiBsB,QAAjB,CAA0BxB,KAA1B,CAAgC+C,GAA1C,CAA3B;AACD;AACD,UAAI,MAAK9C,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBrC,KAAvB,CAA6B+C,GAAjC,EAAsC;AACpC,cAAKZ,SAAL,GAAiB,MAAM,wBAAU,MAAKlC,OAAL,CAAaC,GAAb,CAAiBmC,KAAjB,CAAuBrC,KAAvB,CAA6B+C,GAAvC,CAAvB;AACD;AACF,KAZqB,EAAtB;;AAcA,SAAKE,UAAL;AACD;;;;uCAEkB;AACjB,YAAM,KAAKD,cAAX;AACAnD,qBAAeC,SAAf,CAAyBoD,IAAzB,CAA8B,IAA9B;AACArD,qBAAe4B,YAAf,CAA4ByB,IAA5B,CAAiC,IAAjC;AACD;;;;;;kBAnDkBtD,c;;;;;;;;;;;;;;;;;;ACzCrB,IAAMuD,cAAc;AAClBC,WADkB,qBACRC,CADQ,EACL;AACX;AACA,QAAIC,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;AACA,SAAKC,MAAL,GAAeH,EAAEI,OAAF,GAAYH,EAAEI,IAAf,GAAuB,KAAKC,cAAL,CAAoBC,MAAzD;AACA,SAAKC,MAAL,GAAeR,EAAES,OAAF,GAAYR,EAAES,GAAf,GAAsB,KAAKJ,cAAL,CAAoBK,MAAxD;;AAEA,SAAKC,QAAL,GAAgB,IAAhB;AACD,GARiB;AASlBC,SATkB,qBASR;AACR,SAAKD,QAAL,GAAgB,KAAhB;AACD,GAXiB;AAYlBE,WAZkB,qBAYRd,CAZQ,EAYL;AACX,QAAI,KAAKY,QAAT,EAAmB;AACjB;AACA,UAAIX,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;AACA,UAAIpC,IAAIkC,EAAEI,OAAF,GAAYH,EAAEI,IAAtB;AACA,UAAItC,IAAIiC,EAAES,OAAF,GAAYR,EAAES,GAAtB;;AAEA;AACA,WAAKK,aAAL,GAAsBjD,IAAI,KAAKqC,MAA/B,CAPiB,CAOuB;AACxC,WAAKa,aAAL,GAAsBjD,IAAI,KAAKyC,MAA/B,CARiB,CAQuB;;AAExCS,mBAAaC,qBAAb,CAAmCrB,IAAnC,CAAwC,IAAxC;AACD;AACF,GAzBiB;AA0BlBsB,YA1BkB,sBA0BPnB,CA1BO,EA0BJ;AACZ,QAAIoB,QAAQ,CAAZ;AACA,QAAInB,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;;AAEA,QAAIF,EAAEqB,UAAN,EAAkB;AAChBD,cAAQpB,EAAEqB,UAAF,GAAe,GAAvB;AACD,KAFD,MAGK,IAAIrB,EAAEsB,MAAN,EAAc;AACjBF,cAAQ,CAACpB,EAAEsB,MAAH,GAAY,CAApB;AACD;;AAED,QAAIC,cAAevB,EAAEI,OAAF,GAAYH,EAAEI,IAAjC;AACA,QAAImB,cAAexB,EAAES,OAAF,GAAYR,EAAES,GAAjC;;AAEA,QAAIU,QAAQ,CAAZ,EAAe;AACb,UAAI,KAAKK,SAAL,GAAiB,KAAKC,UAA1B,EAAsC;AACpC,aAAKD,SAAL,IAAkB,CAAlB;;AAEA;AACA,aAAKE,OAAL,GAAe,KAAKrB,cAAL,CAAoBC,MAApB,IAA8BgB,cAAc,KAAKjB,cAAL,CAAoBC,MAAhE,CAAf;AACA,aAAKqB,OAAL,GAAe,KAAKtB,cAAL,CAAoBK,MAApB,IAA8Ba,cAAc,KAAKlB,cAAL,CAAoBK,MAAhE,CAAf;;AAEA;AACA,aAAKkB,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAlD;AACA,aAAKpD,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAxB;AACD;AACF,KAZD,MAYO;AACL,UAAI,KAAKgD,SAAL,GAAiB,CAAC,KAAKC,UAA3B,EAAuC;AACrC,aAAKD,SAAL,IAAkB,CAAlB;;AAEA;AACA,aAAKE,OAAL,GAAe,CAAC,KAAKrB,cAAL,CAAoBC,MAApB,GAA6BgB,WAA9B,IAA6C,CAA5D;AACA,aAAKK,OAAL,GAAe,CAAC,KAAKtB,cAAL,CAAoBK,MAApB,GAA6Ba,WAA9B,IAA6C,CAA5D;;AAEA;AACA,aAAKK,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAlD;AACA,aAAKpD,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAxB;AACD;AACF;AACDwC,iBAAaa,qBAAb,CAAmCjC,IAAnC,CAAwC,IAAxC;AACD;AAlEiB,CAApB;;AAqEA,IAAMkC,cAAc;AAClBC,YADkB,sBACPhC,CADO,EACJ;AACZ;AACA,QAAIC,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;AACA,SAAK+B,MAAL,GAAejC,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBH,EAAEI,IAA1B,GAAkC,KAAKC,cAAL,CAAoBC,MAApE;AACA,SAAK4B,MAAL,GAAenC,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBR,EAAES,GAA1B,GAAiC,KAAKJ,cAAL,CAAoBK,MAAnE;;AAEA,SAAKC,QAAL,GAAgB,IAAhB;;AAEA,QAAIZ,EAAEkC,OAAF,CAAU9E,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAKgF,OAAL,GAAe,IAAf;AACA,WAAKxB,QAAL,GAAgB,KAAhB;AACAmB,kBAAYM,UAAZ,CAAuBxC,IAAvB,CAA4B,IAA5B,EAAkCG,CAAlC;AACD;AACF,GAdiB;AAelBsC,UAfkB,sBAeP;AACT,SAAK1B,QAAL,GAAgB,KAAhB;AACA,QAAI,KAAKwB,OAAT,EAAkB;AAChBL,kBAAYQ,QAAZ,CAAqB1C,IAArB,CAA0B,IAA1B;AACD;AACF,GApBiB;AAqBlB2C,WArBkB,qBAqBRxC,CArBQ,EAqBL;AACX,QAAI,KAAKY,QAAT,EAAmB;AACjB;AACA,UAAIX,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;AACA,UAAIpC,IAAIkC,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBH,EAAEI,IAAjC;AACA,UAAItC,IAAIiC,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBR,EAAES,GAAjC;;AAEA;AACA,WAAKK,aAAL,GAAsBjD,IAAI,KAAKmE,MAA/B,CAPiB,CAOuB;AACxC,WAAKjB,aAAL,GAAsBjD,IAAI,KAAKoE,MAA/B,CARiB,CAQuB;;AAExClB,mBAAaC,qBAAb,CAAmCrB,IAAnC,CAAwC,IAAxC;AACD,KAXD,MAWO,IAAI,KAAKuC,OAAT,EAAkB;AACvBL,kBAAYU,SAAZ,CAAsB5C,IAAtB,CAA2B,IAA3B,EAAiCG,CAAjC;AACD;AACF,GApCiB;AAqClBqC,YArCkB,sBAqCPrC,CArCO,EAqCJ;AACZ,SAAK0C,cAAL,GAAsBC,KAAKC,IAAL,CAClB,CAAC5C,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAArC,KAAiDJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAArF,IACA,CAACJ,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAArC,KAAiDT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAArF,CAFkB,CAAtB;AAID,GA1CiB;AA2ClB8B,UA3CkB,sBA2CP;AACT,SAAKH,OAAL,GAAe,KAAf;AACD,GA7CiB;AA8ClBK,WA9CkB,qBA8CRzC,CA9CQ,EA8CL;AACX,QAAIC,IAAI,KAAK3B,MAAL,CAAY4B,qBAAZ,EAAR;;AAEA,QAAI2C,OAAOF,KAAKC,IAAL,CACP,CAAC5C,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAArC,KAAiDJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAArF,IACA,CAACJ,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAArC,KAAiDT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAArF,CAFO,CAAX;;AAKA,QAAIqC,eAAe,CAAC9C,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAAb,GAAuBJ,EAAEkC,OAAF,CAAU,CAAV,EAAa9B,OAArC,IAAgD,CAAnE;AACA,QAAI2C,eAAe,CAAC/C,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAAb,GAAuBT,EAAEkC,OAAF,CAAU,CAAV,EAAazB,OAArC,IAAgD,CAAnE;;AAEA,QAAIc,cAAeuB,eAAe7C,EAAEI,IAApC;AACA,QAAImB,cAAeuB,eAAe9C,EAAES,GAApC;;AAEA,SAAKsC,YAAL,IAAqB,CAArB;AACA,QAAI,KAAKA,YAAL,KAAsB,KAAKC,OAA/B,EAAwC;AACtC,WAAKD,YAAL,GAAoB,CAApB;AACA,UAAI,KAAKN,cAAL,GAAsBG,IAAtB,GAA6B,CAAjC,EAAoC;AAClC,YAAI,KAAKpB,SAAL,GAAiB,CAArB,EAAwB;AACtBM,sBAAYmB,WAAZ,CAAwBrD,IAAxB,CAA6B,IAA7B,EAAmC0B,WAAnC,EAAgDC,WAAhD;AACA,eAAK/C,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAxB;AACA,eAAKgD,SAAL,IAAkB,CAAlB;AACD;AACF,OAND,MAOK;AACH,YAAI,KAAKA,SAAL,GAAiB,CAAC,CAAtB,EAAyB;AACvBM,sBAAYoB,YAAZ,CAAyBtD,IAAzB,CAA8B,IAA9B,EAAoC0B,WAApC,EAAiDC,WAAjD;AACA,eAAK/C,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAxB;AACA,eAAKgD,SAAL,IAAkB,CAAlB;AACD;AACF;AACDR,mBAAaa,qBAAb,CAAmCjC,IAAnC,CAAwC,IAAxC;AACD;AACF,GA/EiB;AAgFlBqD,aAhFkB,uBAgFN3B,WAhFM,EAgFOC,WAhFP,EAgFoB;AACpC,SAAKG,OAAL,GAAe,KAAKrB,cAAL,CAAoBC,MAApB,IAA8BgB,cAAc,KAAKjB,cAAL,CAAoBC,MAAhE,CAAf;AACA,SAAKqB,OAAL,GAAe,KAAKtB,cAAL,CAAoBK,MAApB,IAA8Ba,cAAc,KAAKlB,cAAL,CAAoBK,MAAhE,CAAf;;AAEA,SAAKkB,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAlD;AACD,GArFiB;AAsFlBsB,cAtFkB,wBAsFL5B,WAtFK,EAsFQC,WAtFR,EAsFqB;AACrC,SAAKG,OAAL,GAAe,CAAC,KAAKrB,cAAL,CAAoBC,MAApB,GAA6BgB,WAA9B,IAA6C,CAA5D;AACA,SAAKK,OAAL,GAAe,CAAC,KAAKtB,cAAL,CAAoBK,MAApB,GAA6Ba,WAA9B,IAA6C,CAA5D;;AAEA,SAAKK,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAlD;AACD;AA3FiB,CAApB;;AA+FA,IAAMZ,eAAe;AACnBmC,YADmB,wBACN;AACX,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKC,UAAL,CAAgBlG,MAApC,EAA4CiG,KAAK,CAAjD,EAAoD;AAClD,UAAI,KAAKvE,SAAT,EAAoB;AAClB,aAAKyE,GAAL,CAASC,SAAT,CAAmB,KAAK1E,SAAxB,EAAoC,KAAKwE,UAAL,CAAgBD,CAAhB,EAAmBtF,CAAnB,GAAuB,KAAKU,IAA5B,GAAmC,KAAK6B,cAAL,CAAoBC,MAA3F,EAAqG,KAAK+C,UAAL,CAAgBD,CAAhB,EAAmBvF,CAAnB,GAAuB,KAAKW,IAA5B,GAAmC,KAAK6B,cAAL,CAAoBK,MAA5J,EAAqK,KAAK7B,SAAL,CAAerB,KAAf,GAAuB,KAAKgB,IAAjM,EAAuM,KAAKK,SAAL,CAAepB,MAAf,GAAwB,KAAKe,IAApO;AACD,OAFD,MAEO;AACL,aAAK8E,GAAL,CAASE,QAAT,CAAmB,KAAKH,UAAL,CAAgBD,CAAhB,EAAmBtF,CAAnB,GAAuB,KAAKU,IAA5B,GAAmC,KAAK6B,cAAL,CAAoBC,MAA1E,EAAoF,KAAK+C,UAAL,CAAgBD,CAAhB,EAAmBvF,CAAnB,GAAuB,KAAKW,IAA5B,GAAmC,KAAK6B,cAAL,CAAoBK,MAA3I,EAAoJ,KAAK+C,KAAL,GAAa,KAAKjF,IAAtK,EAA4K,KAAKiF,KAAL,GAAa,KAAKjF,IAA9L;AACD;AACF;AACF,GATkB;AAUnBkF,cAVmB,0BAUJ;AACb;AACA,SAAKJ,GAAL,CAASK,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKC,WAA9B,EAA2C,KAAKA,WAAhD;;AAEA;AACA,SAAKN,GAAL,CAASC,SAAT,CAAmB,KAAK7G,KAAxB,EAA+B,KAAK2D,cAAL,CAAoBC,MAAnD,EAA2D,KAAKD,cAAL,CAAoBK,MAA/E,EAAuF,KAAKkB,iBAA5F,EAA+G,KAAKiC,cAApH;AACD,GAhBkB;AAiBnB5C,uBAjBmB,mCAiBK;AACtB;AACA,QAAI,KAAKH,aAAL,GAAsB,KAAKc,iBAAL,GAAyB,KAAKpD,IAA9B,GAAqC,KAAKoD,iBAAL,GAAyB,GAAzB,GAA+B,KAAKpD,IAA/F,IACC,KAAKsC,aAAL,GAAqB,EAAE,KAAKc,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,GAApD,CADtB,IAEC,KAAKb,aAAL,GAAsB,KAAK8C,cAAL,GAAsB,KAAKrF,IAA3B,GAAkC,KAAKqF,cAAL,GAAsB,GAAtB,GAA4B,KAAKrF,IAF1F,IAGC,KAAKuC,aAAL,GAAqB,EAAE,KAAK8C,cAAL,GAAsB,KAAKA,cAAL,GAAsB,GAA9C,CAH1B,EAIE;AACA,aAAO,KAAP;AACD;;AAED,SAAKxD,cAAL,CAAoBC,MAApB,GAA6B,KAAKQ,aAAlC;AACA,SAAKT,cAAL,CAAoBK,MAApB,GAA6B,KAAKK,aAAlC;;AAEAC,iBAAa0C,YAAb,CAA0B9D,IAA1B,CAA+B,IAA/B;AACAoB,iBAAamC,UAAb,CAAwBvD,IAAxB,CAA6B,IAA7B;AACD,GAhCkB;AAiCnBiC,uBAjCmB,mCAiCK;AACtB,SAAKgC,cAAL,GAAsB,KAAKC,WAAL,GAAmB,KAAKC,UAAxB,GAAqC,KAAKnC,iBAAhE;;AAEA;AACA,SAAKvB,cAAL,CAAoBC,MAApB,GAA6B,KAAKoB,OAAlC;AACA,SAAKrB,cAAL,CAAoBK,MAApB,GAA6B,KAAKiB,OAAlC;;AAEAX,iBAAa0C,YAAb,CAA0B9D,IAA1B,CAA+B,IAA/B;AACAoB,iBAAamC,UAAb,CAAwBvD,IAAxB,CAA6B,IAA7B;AACD;AA1CkB,CAArB;;IA6CqBoE,M;AACnB,kBAAYtH,KAAZ,EAKsB;AAAA,QAJVkH,WAIU,uEAJI,GAIJ;AAAA,QAHVK,YAGU,uEAHK,GAGL;AAAA,QAFVrC,iBAEU,uEAFU,IAEV;AAAA,QADVrD,KACU,uEADF,IACE;AAAA,QAAVC,IAAU,uEAAH,CAAG;;AAAA;;AAEpB,SAAK9B,KAAL,GAAaA,KAAb;AACA,SAAKqH,UAAL,GAAkBrH,MAAMc,KAAxB;AACA,SAAKsG,WAAL,GAAmBpH,MAAMe,MAAzB;AACA,SAAKY,MAAL,GAAc6F,SAASC,aAAT,CAAuB,QAAvB,CAAd;AACA,SAAKb,GAAL,GAAW,KAAKjF,MAAL,CAAY+F,UAAZ,CAAuB,IAAvB,CAAX;;AAEA,SAAKR,WAAL,GAAmBA,WAAnB;AACA,SAAKK,YAAL,GAAoBA,YAApB;AACA,SAAKrC,iBAAL,GAAyBA,iBAAzB;AACA,SAAKrD,KAAL,GAAaA,KAAb;AACA,SAAKkD,UAAL,GAAkBjD,IAAlB;;AAEA,SAAKqF,cAAL,GAAsB,KAAKC,WAAL,GAAmB,KAAKC,UAAxB,GAAqC,KAAKnC,iBAAhE;;AAEA,SAAKyC,aAAL,GAAqB,KAAKT,WAAL,GAAmB,CAAxC;AACA,SAAKU,aAAL,GAAqB,KAAKL,YAAL,GAAoB,CAAzC;;AAEA,SAAK5D,cAAL,GAAsB;AACpBC,cAAQ,CADY;AAEpBI,cAAQ;AAFY,KAAtB;;AAKA,SAAKqC,YAAL,GAAoB,CAApB;AACA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKxE,IAAL,GAAY,CAAZ;AACA,SAAKgD,SAAL,GAAiB,CAAjB;AACA,SAAK6B,UAAL,GAAkB,EAAlB;;AAEA,SAAK1C,QAAL,GAAgB,KAAhB;;AAEA,QAAI,KAAKpC,KAAT,EAAgB;AACd,WAAKF,MAAL,CAAYkG,gBAAZ,CAA6B,YAA7B,EAA2CzC,YAAYC,UAAZ,CAAuByC,IAAvB,CAA4B,IAA5B,CAA3C;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,WAA7B,EAA0CzC,YAAYS,SAAZ,CAAsBiC,IAAtB,CAA2B,IAA3B,CAA1C;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,UAA7B,EAAyCzC,YAAYO,QAAZ,CAAqBmC,IAArB,CAA0B,IAA1B,CAAzC;;AAEA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,WAA7B,EAA0C1E,YAAYC,SAAZ,CAAsB0E,IAAtB,CAA2B,IAA3B,CAA1C;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,WAA7B,EAA0C1E,YAAYgB,SAAZ,CAAsB2D,IAAtB,CAA2B,IAA3B,CAA1C;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,SAA7B,EAAwC1E,YAAYe,OAAZ,CAAoB4D,IAApB,CAAyB,IAAzB,CAAxC;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,YAA7B,EAA2C1E,YAAYqB,UAAZ,CAAuBsD,IAAvB,CAA4B,IAA5B,CAA3C;AACA,WAAKnG,MAAL,CAAYkG,gBAAZ,CAA6B,gBAA7B,EAA+C1E,YAAYqB,UAAZ,CAAuBsD,IAAvB,CAA4B,IAA5B,CAA/C;AACD;AACF;;;;gCAEW;AACV,WAAKnG,MAAL,CAAYb,KAAZ,GAAoB,KAAKoG,WAAzB;AACA,WAAKvF,MAAL,CAAYZ,MAAZ,GAAqB,KAAKwG,YAA1B;;AAEA;AACA,UAAIQ,eAAe,KAAK7C,iBAAL,GAAyB,CAA5C;AACA,UAAI8C,eAAe,KAAKb,cAAL,GAAsB,CAAzC;;AAEA;AACA,WAAKc,SAAL,GAAiB,KAAKN,aAAL,GAAqBI,YAAtC;AACA,WAAKG,SAAL,GAAiB,KAAKN,aAAL,GAAqBI,YAAtC;;AAEA,WAAKrE,cAAL,CAAoBC,MAApB,GAA6B,KAAKqE,SAAlC;AACA,WAAKtE,cAAL,CAAoBK,MAApB,GAA6B,KAAKkE,SAAlC;;AAEA,WAAKvG,MAAL,CACK+F,UADL,CACgB,IADhB,EAEKb,SAFL,CAGQ,KAAK7G,KAHb,EAIQ,KAAKiI,SAJb,EAKQ,KAAKC,SALb,EAMQ,KAAKhD,iBANb,EAOQ,KAAKiC,cAPb;;AASA,aAAO,KAAKxF,MAAZ;AACD;;;yCAEoBM,I,EAAoC;AAAA,UAA9BkG,KAA8B,uEAAtB,EAAsB;;AAAA;;AAAA,UAAlB3F,IAAkB,uEAAX,EAAW;AAAA,UAAPxC,KAAO;;AACvD,WAAKmC,SAAL,GAAiBnC,KAAjB;AACA,UAAI0G,IAAI,CAAR;AACA,UAAI0B,UAAUC,YAAY,YAAM;AAC9B,cAAK1B,UAAL,CAAgB2B,IAAhB,CAAqBrG,KAAKyE,CAAL,CAArB;AACA,YAAI,MAAKvE,SAAT,EAAoB;AAClB,gBAAKyE,GAAL,CAASC,SAAT,CAAmB,MAAK1E,SAAxB,EAAoCF,KAAKyE,CAAL,EAAQtF,CAAR,GAAY,MAAKU,IAAjB,GAAwB,MAAK6B,cAAL,CAAoBC,MAAhF,EAA0F3B,KAAKyE,CAAL,EAAQvF,CAAR,GAAY,MAAKW,IAAjB,GAAwB,MAAK6B,cAAL,CAAoBK,MAAtI,EAA+I,MAAK7B,SAAL,CAAerB,KAAf,GAAuB,MAAKgB,IAA3K,EAAiL,MAAKK,SAAL,CAAepB,MAAf,GAAwB,MAAKe,IAA9M;AACD,SAFD,MAEO;AACL,gBAAK8E,GAAL,CAASE,QAAT,CAAmB7E,KAAKyE,CAAL,EAAQtF,CAAR,GAAY,MAAKU,IAAjB,GAAwB,MAAK6B,cAAL,CAAoBC,MAA/D,EAAyE3B,KAAKyE,CAAL,EAAQvF,CAAR,GAAY,MAAKW,IAAjB,GAAwB,MAAK6B,cAAL,CAAoBK,MAArH,EAA8H,MAAK+C,KAAL,GAAa,MAAKjF,IAAhJ,EAAsJ,MAAKiF,KAAL,GAAa,MAAKjF,IAAxK;AACD;;AAED,YAAI4E,IAAIlE,IAAJ,IAAYP,KAAKxB,MAArB,EAA6B8H,cAAcH,OAAd;AAC7B1B,aAAKlE,IAAL;AACD,OAVa,EAUX2F,KAVW,CAAd;;AAYA,WAAKvB,GAAL,CAASK,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKC,WAA9B,EAA2C,KAAKK,YAAhD;;AAEA,WAAKX,GAAL,CAASC,SAAT,CAAmB,KAAK7G,KAAxB,EAA+B,KAAK2D,cAAL,CAAoBC,MAAnD,EAA2D,KAAKD,cAAL,CAAoBK,MAA/E,EAAuF,KAAKkB,iBAA5F,EAA+G,KAAKiC,cAApH;AACA,WAAKR,UAAL,GAAkB,EAAlB;;AAEA6B,iBAAW,KAAKlG,oBAAL,CAA0BwF,IAA1B,CAA+B,IAA/B,EAAqC7F,IAArC,EAA2CkG,KAA3C,EAAkD3F,IAAlD,EAAwDxC,KAAxD,CAAX,EAA2EiC,KAAKxB,MAAL,GAAc0H,KAAd,GAAsB,EAAjG;AAED;;;2CAEsBlG,I,EAA8D;AAAA,UAAxDkG,KAAwD,uEAAhD,EAAgD;AAAA,UAA5C3F,IAA4C,uEAArC,EAAqC;;AAAA;;AAAA,UAAjCG,KAAiC,uEAAzB,MAAyB;AAAA,UAAjBC,WAAiB,uEAAH,CAAG;;AACnF,WAAKmE,KAAL,GAAanE,WAAb;;AAEA,UAAI8D,IAAI,CAAR;AACA,UAAI0B,UAAUC,YAAY,YAAM;AAC9B,eAAK1B,UAAL,CAAgB2B,IAAhB,CAAqBrG,KAAKyE,CAAL,CAArB;AACA,eAAKE,GAAL,CAAS6B,SAAT,GAAqB9F,KAArB;AACA,eAAKiE,GAAL,CAASE,QAAT,CAAmB7E,KAAKyE,CAAL,EAAQtF,CAAR,GAAY,OAAKU,IAAjB,GAAwB,OAAK6B,cAAL,CAAoBC,MAA/D,EAAyE3B,KAAKyE,CAAL,EAAQvF,CAAR,GAAY,OAAKW,IAAjB,GAAwB,OAAK6B,cAAL,CAAoBK,MAArH,EAA8H,OAAK+C,KAAL,GAAa,OAAKjF,IAAhJ,EAAsJ,OAAKiF,KAAL,GAAa,OAAKjF,IAAxK;;AAEA,YAAI4E,IAAIlE,IAAJ,IAAYP,KAAKxB,MAArB,EAA6B8H,cAAcH,OAAd;AAC7B1B,aAAKlE,IAAL;AACD,OAPa,EAOX2F,KAPW,CAAd;;AASA,WAAKvB,GAAL,CAASK,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKC,WAA9B,EAA2C,KAAKK,YAAhD;;AAEA,WAAKX,GAAL,CAASC,SAAT,CAAmB,KAAK7G,KAAxB,EAA+B,KAAK2D,cAAL,CAAoBC,MAAnD,EAA2D,KAAKD,cAAL,CAAoBK,MAA/E,EAAuF,KAAKkB,iBAA5F,EAA+G,KAAKiC,cAApH;AACA,WAAKR,UAAL,GAAkB,EAAlB;;AAEA6B,iBAAW,KAAK/F,sBAAL,CAA4BqF,IAA5B,CAAiC,IAAjC,EAAuC7F,IAAvC,EAA6CkG,KAA7C,EAAoD3F,IAApD,EAA0DG,KAA1D,EAAiEC,WAAjE,CAAX,EAA0FX,KAAKxB,MAAL,GAAc0H,KAAd,GAAsB,EAAhH;AAED;;;;;;kBA1HkBb,M;;;;;;;;;;;;;;;;ACjNrB;;;;IAEqBoB,Q;AACnB,oBAAY1I,KAAZ,EAA2E;AAAA,QAAxDG,UAAwD,uEAA3C,EAACmD,GAAG,GAAJ,EAASqF,GAAG,GAAZ,EAAiBC,GAAG,GAApB,EAA2C;AAAA,QAAjBxI,QAAiB,uEAAN,IAAM;;AAAA;;AACzE,SAAKJ,KAAL,GAAaA,KAAb;AACA,SAAKc,KAAL,GAAad,MAAMc,KAAnB;AACA,SAAKC,MAAL,GAAcf,MAAMe,MAApB;AACA,SAAKZ,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AAED;;;;6BAEoB;AAAA,UAAde,CAAc,uEAAV,CAAU;AAAA,UAAPC,CAAO,uEAAH,CAAG;;AACnB,WAAKO,MAAL,GAAc6F,SAASC,aAAT,CAAuB,QAAvB,CAAd;AACA,WAAKb,GAAL,GAAW,KAAKjF,MAAL,CAAY+F,UAAZ,CAAuB,IAAvB,CAAX;AACA,WAAK/F,MAAL,CAAYb,KAAZ,GAAoB,KAAKA,KAAzB;AACA,WAAKa,MAAL,CAAYZ,MAAZ,GAAqB,KAAKA,MAA1B;AACA,WAAKY,MAAL,CACK+F,UADL,CACgB,IADhB,EAEKb,SAFL,CAGQ,KAAK7G,KAHb,EAIQmB,IAAI,KAAKL,KAJjB,EAKQM,IAAI,KAAKL,MALjB,EAMQ,KAAKD,KANb,EAOQ,KAAKC,MAPb,EAQQ,CARR,EASQ,CATR,EAUQ,KAAKD,KAVb,EAWQ,KAAKC,MAXb;;AAaA,aAAO,KAAKY,MAAZ;AACD;;;+BAEU1B,O,EAAS;AAClB,WAAKA,OAAL,GAAeA,OAAf;AACD;;;qCAEgB;AACf,UAAMa,QAAQ,KAAKa,MAAL,CAAYb,KAAZ,GAAoB,CAApB,KAA0B,CAA1B,GAA8B,KAAKa,MAAL,CAAYb,KAAZ,GAAoB,CAAlD,GAAsD,KAAKa,MAAL,CAAYb,KAAhF;AACA,UAAMC,SAAS,KAAKY,MAAL,CAAYZ,MAA3B;AACA,UAAMb,MAAM,KAAK0G,GAAL,CAASiC,YAAT,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B/H,KAA5B,EAAmCC,MAAnC,CAAZ;AACA,UAAI+H,YAAY5I,IAAI6I,IAApB;AACA,UAAIzF,UAAJ;AAAA,UAAOqF,UAAP;AAAA,UAAUC,UAAV;AACA,UAAII,gBAAgB,EAApB;AACA,UAAIC,oBAAoB,EAAxB;;AAEA,WAAK,IAAIC,IAAI,CAAR,EAAWC,MAAML,UAAUrI,MAAhC,EAAwCyI,IAAIC,GAA5C,EAAiDD,KAAK,CAAtD,EAAyD;AACvD5F,YAAIwF,UAAUI,CAAV,CAAJ;AACAP,YAAIG,UAAUI,IAAI,CAAd,CAAJ;AACAN,YAAIE,UAAUI,IAAI,CAAd,CAAJ;;AAEA,YAAIA,IAAIpI,KAAJ,GAAY,CAAZ,KAAkB,CAAtB,EAAyB;AACvBmI,8BAAoB,EAApB;AACAD,wBAAcV,IAAd,CAAmBW,iBAAnB;AACD;AACD,YAAI3F,MAAM,KAAKnD,UAAL,CAAgBmD,CAAtB,IAA2BqF,MAAM,KAAKxI,UAAL,CAAgBwI,CAAjD,IAAsDC,MAAM,KAAKzI,UAAL,CAAgByI,CAAhF,EAAmF;AACjFK,4BAAkBX,IAAlB,CAAuB,CAAvB;AACD,SAFD,MAEO;AACLW,4BAAkBX,IAAlB,CAAuB,CAAvB;AACD;AACF;AACD,WAAK1B,GAAL,CAASwC,YAAT,CAAsBlJ,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B;;AAEA,aAAO8I,aAAP;AACD;;;8BAES;AACR,UAAMK,MAAM,KAAKC,cAAL,EAAZ;AACA,UAAIC,QAAQ,IAAIC,KAAJ,CAAUH,GAAV,EAAe,EAACjJ,UAAU,KAAKH,OAAL,CAAaG,QAAxB,EAAf,CAAZ;;AAEA,UAAIqJ,kBAAkBF,MAAMG,IAAN,CAAW,KAAKzJ,OAAL,CAAaY,UAAb,CAAwBK,WAAxB,CAAoCE,CAA/C,EAAkD,KAAKnB,OAAL,CAAaY,UAAb,CAAwBK,WAAxB,CAAoCC,CAAtF,CAAtB;AACA,UAAIwI,gBAAgBJ,MAAMG,IAAN,CAAW,KAAKzJ,OAAL,CAAauB,QAAb,CAAsBN,WAAtB,CAAkCE,CAA7C,EAAgD,KAAKnB,OAAL,CAAauB,QAAb,CAAsBN,WAAtB,CAAkCC,CAAlF,CAApB;;AAEA,aAAOyI,MAAMC,MAAN,CAAaN,KAAb,EAAoBE,eAApB,EAAqCE,aAArC,CAAP;AACD;;;8BAES3J,K,EAAOmB,C,EAAGC,C,EAAoB;AAAA,UAAjBC,QAAiB,uEAAN,IAAM;;AACtC,UAAIH,cAAc,EAAlB;;AAEA,cAAQG,QAAR;AACE,aAAK,IAAL;AACEH,sBAAYC,CAAZ,GAAgBA,IAAInB,MAAMc,KAAN,GAAc,CAAlC;AACAI,sBAAYE,CAAZ,GAAgBA,IAAIpB,MAAMe,MAA1B;AACA;AACF,aAAK,QAAL;AACEG,sBAAYC,CAAZ,GAAgBA,CAAhB;AACAD,sBAAYE,CAAZ,GAAgBA,CAAhB;AACA;AARJ;;AAWA,WAAKwF,GAAL,CACKC,SADL,CAEQ7G,KAFR,EAGQkB,YAAYC,CAHpB,EAIQD,YAAYE,CAJpB,EAKQpB,MAAMc,KALd,EAMQd,MAAMe,MANd;AAQD;;;;;;kBAhGkB2H,Q;;;;;;;;;;;;ACFrB;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,UAASoB,UAAT,EAAqB;AAClB;AACA,QAAG,gCAAOC,MAAP,OAAkB,QAAlB,IAA8B,QAAOA,OAAOC,OAAd,MAA0B,QAA3D,EAAqE;AACjED,eAAOC,OAAP,GAAiBF,YAAjB;AACH,KAFD,MAEO,IAAG,IAAH,EAA+C;AAClDG,QAAA,iCAAO,EAAP,oCAAWH,UAAX;AAAA;AAAA;AAAA;AACH,KAFM,MAEA;AACH,YAAIE,UAAUF,YAAd;AACAI,eAAON,KAAP,GAAeI,QAAQJ,KAAvB;AACAM,eAAOV,KAAP,GAAeQ,QAAQR,KAAvB;AACH;AACJ,CAXD,EAWG,YAAW;;AAEd,aAASW,MAAT,CAAgBC,IAAhB,EAAqB;AACjB,YAAIC,OAAOD,IAAX;AAAA,YACInI,OAAO,EADX;AAEA,eAAMoI,KAAKC,MAAX,EAAmB;AACfrI,iBAAKsI,OAAL,CAAaF,IAAb;AACAA,mBAAOA,KAAKC,MAAZ;AACH;AACD,eAAOrI,IAAP;AACH;;AAED,aAASuI,OAAT,GAAmB;AACf,eAAO,IAAIC,UAAJ,CAAe,UAASL,IAAT,EAAe;AACjC,mBAAOA,KAAKM,CAAZ;AACH,SAFM,CAAP;AAGH;;AAED,QAAId,QAAQ;AACR;;;;;;;;;;;AAWAC,gBAAQ,gBAASN,KAAT,EAAgBoB,KAAhB,EAAuBC,GAAvB,EAA4B3K,OAA5B,EAAqC;AACzCsJ,kBAAMsB,UAAN;AACA5K,sBAAUA,WAAW,EAArB;AACA,gBAAI6K,YAAY7K,QAAQ6K,SAAR,IAAqBlB,MAAMmB,UAAN,CAAiBC,SAAtD;AAAA,gBACIC,UAAUhL,QAAQgL,OAAR,IAAmB,KADjC;;AAGA,gBAAIC,WAAWV,SAAf;AAAA,gBACIW,cAAcR,KADlB,CANyC,CAOhB;;AAEzBA,kBAAMS,CAAN,GAAUN,UAAUH,KAAV,EAAiBC,GAAjB,CAAV;;AAEAM,qBAAS5C,IAAT,CAAcqC,KAAd;;AAEA,mBAAMO,SAASG,IAAT,KAAkB,CAAxB,EAA2B;;AAEvB;AACA,oBAAIC,cAAcJ,SAASK,GAAT,EAAlB;;AAEA;AACA,oBAAGD,gBAAgBV,GAAnB,EAAwB;AACpB,2BAAOT,OAAOmB,WAAP,CAAP;AACH;;AAED;AACAA,4BAAYE,MAAZ,GAAqB,IAArB;;AAEA;AACA,oBAAIC,YAAYlC,MAAMkC,SAAN,CAAgBH,WAAhB,CAAhB;;AAEA,qBAAK,IAAI5E,IAAI,CAAR,EAAWgF,KAAKD,UAAUhL,MAA/B,EAAuCiG,IAAIgF,EAA3C,EAA+C,EAAEhF,CAAjD,EAAoD;AAChD,wBAAIiF,WAAWF,UAAU/E,CAAV,CAAf;;AAEA,wBAAIiF,SAASH,MAAT,IAAmBG,SAASC,MAAT,EAAvB,EAA0C;AACtC;AACA;AACH;;AAED;AACA;AACA,wBAAIC,SAASP,YAAY3C,CAAZ,GAAgBgD,SAASG,OAAT,CAAiBR,WAAjB,CAA7B;AAAA,wBACIS,cAAcJ,SAASK,OAD3B;;AAGA,wBAAI,CAACD,WAAD,IAAgBF,SAASF,SAAShD,CAAtC,EAAyC;;AAErC;AACAgD,iCAASK,OAAT,GAAmB,IAAnB;AACAL,iCAASrB,MAAT,GAAkBgB,WAAlB;AACAK,iCAASP,CAAT,GAAaO,SAASP,CAAT,IAAcN,UAAUa,QAAV,EAAoBf,GAApB,CAA3B;AACAe,iCAAShD,CAAT,GAAakD,MAAb;AACAF,iCAASjB,CAAT,GAAaiB,SAAShD,CAAT,GAAagD,SAASP,CAAnC;AACA7B,8BAAM0C,SAAN,CAAgBN,QAAhB;AACA,4BAAIV,OAAJ,EAAa;AACT;AACA;AACA,gCAAIU,SAASP,CAAT,GAAaD,YAAYC,CAAzB,IAA+BO,SAASP,CAAT,KAAeD,YAAYC,CAA3B,IAAgCO,SAAShD,CAAT,GAAawC,YAAYxC,CAA5F,EAAgG;AAC5FwC,8CAAcQ,QAAd;AACH;AACJ;;AAED,4BAAI,CAACI,WAAL,EAAkB;AACd;AACAb,qCAAS5C,IAAT,CAAcqD,QAAd;AACH,yBAHD,MAIK;AACD;AACAT,qCAASgB,cAAT,CAAwBP,QAAxB;AACH;AACJ;AACJ;AACJ;;AAED,gBAAIV,OAAJ,EAAa;AACT,uBAAOd,OAAOgB,WAAP,CAAP;AACH;;AAED;AACA,mBAAO,EAAP;AACH,SAzFO;AA0FR;AACAJ,oBAAY;AACRC,uBAAW,mBAASmB,IAAT,EAAeC,IAAf,EAAqB;AAC5B,oBAAIC,KAAKrG,KAAKsG,GAAL,CAASF,KAAKjL,CAAL,GAASgL,KAAKhL,CAAvB,CAAT;AACA,oBAAIoL,KAAKvG,KAAKsG,GAAL,CAASF,KAAKhL,CAAL,GAAS+K,KAAK/K,CAAvB,CAAT;AACA,uBAAOiL,KAAKE,EAAZ;AACH,aALO;AAMRnM,sBAAU,kBAAS+L,IAAT,EAAeC,IAAf,EAAqB;AAC3B,oBAAII,IAAI,CAAR;AACA,oBAAIC,KAAKzG,KAAKC,IAAL,CAAU,CAAV,CAAT;AACA,oBAAIoG,KAAKrG,KAAKsG,GAAL,CAASF,KAAKjL,CAAL,GAASgL,KAAKhL,CAAvB,CAAT;AACA,oBAAIoL,KAAKvG,KAAKsG,GAAL,CAASF,KAAKhL,CAAL,GAAS+K,KAAK/K,CAAvB,CAAT;AACA,uBAAQoL,KAAKH,KAAKE,EAAV,CAAD,GAAmB,CAACE,KAAM,IAAID,CAAX,IAAiBxG,KAAK0G,GAAL,CAASL,EAAT,EAAaE,EAAb,CAA3C;AACH;AAZO,SA3FJ;AAyGRI,mBAAU,mBAASvC,IAAT,EAAc;AACpBA,iBAAKM,CAAL,GAAS,CAAT;AACAN,iBAAKzB,CAAL,GAAS,CAAT;AACAyB,iBAAKgB,CAAL,GAAS,CAAT;AACAhB,iBAAK4B,OAAL,GAAe,KAAf;AACA5B,iBAAKoB,MAAL,GAAc,KAAd;AACApB,iBAAKE,MAAL,GAAc,IAAd;AACH;AAhHO,KAAZ;;AAmHA;;;;;;AAMA,aAASd,KAAT,CAAeoD,MAAf,EAAuB3M,OAAvB,EAAgC;AAC5BA,kBAAUA,WAAW,EAArB;AACA,aAAK4M,KAAL,GAAa,EAAb;AACA,aAAKzM,QAAL,GAAgB,CAAC,CAACH,QAAQG,QAA1B;AACA,aAAKsJ,IAAL,GAAY,EAAZ;AACA,aAAK,IAAIvI,IAAI,CAAb,EAAgBA,IAAIyL,OAAOnM,MAA3B,EAAmCU,GAAnC,EAAwC;AACpC,iBAAKuI,IAAL,CAAUvI,CAAV,IAAe,EAAf;;AAEA,iBAAK,IAAIC,IAAI,CAAR,EAAW0L,MAAMF,OAAOzL,CAAP,CAAtB,EAAiCC,IAAI0L,IAAIrM,MAAzC,EAAiDW,GAAjD,EAAsD;AAClD,oBAAIgJ,OAAO,IAAI2C,QAAJ,CAAa5L,CAAb,EAAgBC,CAAhB,EAAmB0L,IAAI1L,CAAJ,CAAnB,CAAX;AACA,qBAAKsI,IAAL,CAAUvI,CAAV,EAAaC,CAAb,IAAkBgJ,IAAlB;AACA,qBAAKyC,KAAL,CAAWvE,IAAX,CAAgB8B,IAAhB;AACH;AACJ;AACD,aAAK4C,IAAL;AACH;;AAEDxD,UAAMyD,SAAN,CAAgBD,IAAhB,GAAuB,YAAW;AAC9B,aAAKE,UAAL,GAAkB,EAAlB;AACA,aAAK,IAAIxG,IAAI,CAAb,EAAgBA,IAAI,KAAKmG,KAAL,CAAWpM,MAA/B,EAAuCiG,GAAvC,EAA4C;AACxCkD,kBAAM+C,SAAN,CAAgB,KAAKE,KAAL,CAAWnG,CAAX,CAAhB;AACH;AACJ,KALD;;AAOA8C,UAAMyD,SAAN,CAAgBpC,UAAhB,GAA6B,YAAW;AACpC,aAAK,IAAInE,IAAI,CAAb,EAAgBA,IAAI,KAAKwG,UAAL,CAAgBzM,MAApC,EAA4CiG,GAA5C,EAAiD;AAC7CkD,kBAAM+C,SAAN,CAAgB,KAAKO,UAAL,CAAgBxG,CAAhB,CAAhB;AACH;AACD,aAAKwG,UAAL,GAAkB,EAAlB;AACH,KALD;;AAOA1D,UAAMyD,SAAN,CAAgBhB,SAAhB,GAA4B,UAAS7B,IAAT,EAAe;AACvC,aAAK8C,UAAL,CAAgB5E,IAAhB,CAAqB8B,IAArB;AACH,KAFD;;AAIAZ,UAAMyD,SAAN,CAAgBxB,SAAhB,GAA4B,UAASrB,IAAT,EAAe;AACvC,YAAI+C,MAAM,EAAV;AAAA,YACIhM,IAAIiJ,KAAKjJ,CADb;AAAA,YAEIC,IAAIgJ,KAAKhJ,CAFb;AAAA,YAGIsI,OAAO,KAAKA,IAHhB;;AAKA;AACA,YAAGA,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,CAAV,CAAhB,EAA8B;AAC1B+L,gBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,CAAV,CAAT;AACH;;AAED;AACA,YAAGsI,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,CAAV,CAAhB,EAA8B;AAC1B+L,gBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,CAAV,CAAT;AACH;;AAED;AACA,YAAGsI,KAAKvI,CAAL,KAAWuI,KAAKvI,CAAL,EAAQC,IAAE,CAAV,CAAd,EAA4B;AACxB+L,gBAAI7E,IAAJ,CAASoB,KAAKvI,CAAL,EAAQC,IAAE,CAAV,CAAT;AACH;;AAED;AACA,YAAGsI,KAAKvI,CAAL,KAAWuI,KAAKvI,CAAL,EAAQC,IAAE,CAAV,CAAd,EAA4B;AACxB+L,gBAAI7E,IAAJ,CAASoB,KAAKvI,CAAL,EAAQC,IAAE,CAAV,CAAT;AACH;;AAED,YAAI,KAAKhB,QAAT,EAAmB;AACf;AACA,gBAAGsJ,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAhB,EAAgC;AAC5B+L,oBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAT;AACH;;AAED;AACA,gBAAGsI,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAhB,EAAgC;AAC5B+L,oBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAT;AACH;;AAED;AACA,gBAAGsI,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAhB,EAAgC;AAC5B+L,oBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAT;AACH;;AAED;AACA,gBAAGsI,KAAKvI,IAAE,CAAP,KAAauI,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAhB,EAAgC;AAC5B+L,oBAAI7E,IAAJ,CAASoB,KAAKvI,IAAE,CAAP,EAAUC,IAAE,CAAZ,CAAT;AACH;AACJ;;AAED,eAAO+L,GAAP;AACH,KAjDD;;AAmDA3D,UAAMyD,SAAN,CAAgBG,QAAhB,GAA2B,YAAW;AAClC,YAAIC,cAAc,EAAlB;AAAA,YACIR,QAAQ,KAAKnD,IADjB;AAAA,YACuB;AACnB4D,gBAFJ;AAAA,YAEcR,GAFd;AAAA,YAEmB1L,CAFnB;AAAA,YAEsBmM,CAFtB;AAGA,aAAK,IAAIpM,IAAI,CAAR,EAAWgI,MAAM0D,MAAMpM,MAA5B,EAAoCU,IAAIgI,GAAxC,EAA6ChI,GAA7C,EAAkD;AAC9CmM,uBAAW,EAAX;AACAR,kBAAMD,MAAM1L,CAAN,CAAN;AACA,iBAAKC,IAAI,CAAJ,EAAOmM,IAAIT,IAAIrM,MAApB,EAA4BW,IAAImM,CAAhC,EAAmCnM,GAAnC,EAAwC;AACpCkM,yBAAShF,IAAT,CAAcwE,IAAI1L,CAAJ,EAAOoM,MAArB;AACH;AACDH,wBAAY/E,IAAZ,CAAiBgF,SAASG,IAAT,CAAc,GAAd,CAAjB;AACH;AACD,eAAOJ,YAAYI,IAAZ,CAAiB,IAAjB,CAAP;AACH,KAbD;;AAeA,aAASV,QAAT,CAAkB5L,CAAlB,EAAqBC,CAArB,EAAwBoM,MAAxB,EAAgC;AAC5B,aAAKrM,CAAL,GAASA,CAAT;AACA,aAAKC,CAAL,GAASA,CAAT;AACA,aAAKoM,MAAL,GAAcA,MAAd;AACH;;AAEDT,aAASE,SAAT,CAAmBG,QAAnB,GAA8B,YAAW;AACrC,eAAO,MAAM,KAAKjM,CAAX,GAAe,GAAf,GAAqB,KAAKC,CAA1B,GAA8B,GAArC;AACH,KAFD;;AAIA2L,aAASE,SAAT,CAAmBnB,OAAnB,GAA6B,UAAS4B,YAAT,EAAuB;AAChD;AACA,YAAIA,gBAAgBA,aAAavM,CAAb,IAAkB,KAAKA,CAAvC,IAA4CuM,aAAatM,CAAb,IAAkB,KAAKA,CAAvE,EAA0E;AACtE,mBAAO,KAAKoM,MAAL,GAAc,OAArB;AACH;AACD,eAAO,KAAKA,MAAZ;AACH,KAND;;AAQAT,aAASE,SAAT,CAAmBrB,MAAnB,GAA4B,YAAW;AACnC,eAAO,KAAK4B,MAAL,KAAgB,CAAvB;AACH,KAFD;;AAIA,aAAS/C,UAAT,CAAoBkD,aAApB,EAAkC;AAC9B,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKD,aAAL,GAAqBA,aAArB;AACH;;AAEDlD,eAAWwC,SAAX,GAAuB;AACnB3E,cAAM,cAASuF,OAAT,EAAkB;AACpB;AACA,iBAAKD,OAAL,CAAatF,IAAb,CAAkBuF,OAAlB;;AAEA;AACA,iBAAKC,QAAL,CAAc,KAAKF,OAAL,CAAanN,MAAb,GAAsB,CAApC;AACH,SAPkB;AAQnB8K,aAAK,eAAW;AACZ;AACA,gBAAIwC,SAAS,KAAKH,OAAL,CAAa,CAAb,CAAb;AACA;AACA,gBAAIhD,MAAM,KAAKgD,OAAL,CAAarC,GAAb,EAAV;AACA;AACA;AACA,gBAAI,KAAKqC,OAAL,CAAanN,MAAb,GAAsB,CAA1B,EAA6B;AACzB,qBAAKmN,OAAL,CAAa,CAAb,IAAkBhD,GAAlB;AACA,qBAAKoD,QAAL,CAAc,CAAd;AACH;AACD,mBAAOD,MAAP;AACH,SApBkB;AAqBnBE,gBAAQ,gBAAS7D,IAAT,EAAe;AACnB,gBAAI1D,IAAI,KAAKkH,OAAL,CAAaM,OAAb,CAAqB9D,IAArB,CAAR;;AAEA;AACA;AACA,gBAAIQ,MAAM,KAAKgD,OAAL,CAAarC,GAAb,EAAV;;AAEA,gBAAI7E,MAAM,KAAKkH,OAAL,CAAanN,MAAb,GAAsB,CAAhC,EAAmC;AAC/B,qBAAKmN,OAAL,CAAalH,CAAb,IAAkBkE,GAAlB;;AAEA,oBAAI,KAAK+C,aAAL,CAAmB/C,GAAnB,IAA0B,KAAK+C,aAAL,CAAmBvD,IAAnB,CAA9B,EAAwD;AACpD,yBAAK0D,QAAL,CAAcpH,CAAd;AACH,iBAFD,MAGK;AACD,yBAAKsH,QAAL,CAActH,CAAd;AACH;AACJ;AACJ,SAtCkB;AAuCnB2E,cAAM,gBAAW;AACb,mBAAO,KAAKuC,OAAL,CAAanN,MAApB;AACH,SAzCkB;AA0CnByL,wBAAgB,wBAAS9B,IAAT,EAAe;AAC3B,iBAAK0D,QAAL,CAAc,KAAKF,OAAL,CAAaM,OAAb,CAAqB9D,IAArB,CAAd;AACH,SA5CkB;AA6CnB0D,kBAAU,kBAASK,CAAT,EAAY;AAClB;AACA,gBAAIN,UAAU,KAAKD,OAAL,CAAaO,CAAb,CAAd;;AAEA;AACA,mBAAOA,IAAI,CAAX,EAAc;;AAEV;AACA,oBAAIC,UAAU,CAAED,IAAI,CAAL,IAAW,CAAZ,IAAiB,CAA/B;AAAA,oBACI7D,SAAS,KAAKsD,OAAL,CAAaQ,OAAb,CADb;AAEA;AACA,oBAAI,KAAKT,aAAL,CAAmBE,OAAnB,IAA8B,KAAKF,aAAL,CAAmBrD,MAAnB,CAAlC,EAA8D;AAC1D,yBAAKsD,OAAL,CAAaQ,OAAb,IAAwBP,OAAxB;AACA,yBAAKD,OAAL,CAAaO,CAAb,IAAkB7D,MAAlB;AACA;AACA6D,wBAAIC,OAAJ;AACH;AACD;AANA,qBAOK;AACD;AACH;AACJ;AACJ,SAnEkB;AAoEnBJ,kBAAU,kBAASG,CAAT,EAAY;AAClB;AACA,gBAAI1N,SAAS,KAAKmN,OAAL,CAAanN,MAA1B;AAAA,gBACIoN,UAAU,KAAKD,OAAL,CAAaO,CAAb,CADd;AAAA,gBAEIE,YAAY,KAAKV,aAAL,CAAmBE,OAAnB,CAFhB;;AAIA,mBAAM,IAAN,EAAY;AACR;AACA,oBAAIS,UAAWH,IAAI,CAAL,IAAW,CAAzB;AAAA,oBACII,UAAUD,UAAU,CADxB;AAEA;AACA,oBAAIE,OAAO,IAAX;AAAA,oBACIC,WADJ;AAEA;AACA,oBAAIF,UAAU9N,MAAd,EAAsB;AAClB;AACA,wBAAIiO,SAAS,KAAKd,OAAL,CAAaW,OAAb,CAAb;AACAE,kCAAc,KAAKd,aAAL,CAAmBe,MAAnB,CAAd;;AAEA;AACA,wBAAID,cAAcJ,SAAlB,EAA4B;AACxBG,+BAAOD,OAAP;AACH;AACJ;;AAED;AACA,oBAAID,UAAU7N,MAAd,EAAsB;AAClB,wBAAIkO,SAAS,KAAKf,OAAL,CAAaU,OAAb,CAAb;AAAA,wBACIM,cAAc,KAAKjB,aAAL,CAAmBgB,MAAnB,CADlB;AAEA,wBAAIC,eAAeJ,SAAS,IAAT,GAAgBH,SAAhB,GAA4BI,WAA3C,CAAJ,EAA6D;AACzDD,+BAAOF,OAAP;AACH;AACJ;;AAED;AACA,oBAAIE,SAAS,IAAb,EAAmB;AACf,yBAAKZ,OAAL,CAAaO,CAAb,IAAkB,KAAKP,OAAL,CAAaY,IAAb,CAAlB;AACA,yBAAKZ,OAAL,CAAaY,IAAb,IAAqBX,OAArB;AACAM,wBAAIK,IAAJ;AACH;AACD;AALA,qBAMK;AACD;AACH;AACJ;AACJ;AAjHkB,KAAvB;;AAoHA,WAAO;AACH5E,eAAOA,KADJ;AAEHJ,eAAOA;AAFJ,KAAP;AAKC,CA/YD,E;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ICrBqBqF,K;AACnB,iBAAY7O,KAAZ,EAAmBc,KAAnB,EAA0BC,MAA1B,EAAkC;AAAA;;AAChC,SAAKf,KAAL,GAAaA,KAAb;AACA,SAAK2B,MAAL,GAAc6F,SAASC,aAAT,CAAuB,QAAvB,CAAd;AACA,SAAK9F,MAAL,CAAYb,KAAZ,GAAoBA,SAAS,KAAKd,KAAL,CAAWc,KAAxC;AACA,SAAKa,MAAL,CAAYZ,MAAZ,GAAqBA,UAAU,KAAKf,KAAL,CAAWe,MAA1C;AACD;;;;+BAEU;AACT,WAAKY,MAAL,CACK+F,UADL,CACgB,IADhB,EAEKb,SAFL,CAGQ,KAAK7G,KAHb,EAIQ,CAJR,EAKQ,CALR,EAMQ,KAAK2B,MAAL,CAAYb,KANpB,EAOQ,KAAKa,MAAL,CAAYZ,MAPpB;AAQA,aAAO,KAAKY,MAAZ;AACD;;;;;;kBAlBkBkN,K;;;;;;;;;;;;;QCALC,S,GAAAA,S;AAAT,SAASA,SAAT,CAAmB/L,GAAnB,EAAwB;AAC7B,SAAO,IAAIgM,OAAJ,CAAY,mBAAW;AAC5B,QAAM/O,QAAQ,IAAIgP,KAAJ,EAAd;;AAEAhP,UAAM6H,gBAAN,CAAuB,MAAvB,EAA+B,YAAM;AACnCoH,cAAQjP,KAAR;AACD,KAFD;AAGAA,UAAMkP,GAAN,GAAYnM,GAAZ;AACA/C,UAAMmP,WAAN,GAAoB,WAApB;AACD,GARM,CAAP;AASD,C","file":"canvasRouteMap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"canvasRouteMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"canvasRouteMap\"] = factory();\n\telse\n\t\troot[\"canvasRouteMap\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b8c819f077781270f9b7","import CanvasRouteMap from './CanvasRouteMap.js';\nexport { CanvasRouteMap };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Canvas from './Canvas.js';\nimport RouteMap from './RouteMap.js';\nimport Point from './Point.js';\nimport {loadImage} from './loaders.js';\n\nconst privateMethods = {\n  createMap() {\n    this.mapEntity = new RouteMap(this.image, this.options.map.trackColor, this.options.map.diagonal);\n    this.mapCanvas = this.mapEntity.getMap();\n\n    if (Object.keys(this.options.map).length) {\n      this.mapEntity.setOptions(this.options.map);\n\n      if (this.startPointImage) {\n        const startPointEntity = new Point(this.startPointImage, this.options.map.startPoint.image.width, this.options.map.startPoint.image.height);\n        this.mapEntity.drawPoint(startPointEntity.getPoint(), this.options.map.startPoint.coordinates.x, this.options.map.startPoint.coordinates.y, this.options.map.startPoint.image.position);\n      }\n      if (this.endPointImage) {\n        const endPointEntity = new Point(this.endPointImage, this.options.map.endPoint.image.width, this.options.map.endPoint.image.height);\n        this.mapEntity.drawPoint(endPointEntity.getPoint(), this.options.map.endPoint.coordinates.x, this.options.map.endPoint.coordinates.y, this.options.map.endPoint.image.position);\n      }\n    }\n  },\n  createCanvas() {\n    this.canvasEntity = new Canvas(this.mapCanvas, this.options.canvas.width, this.options.canvas.height, this.options.canvas.initialWidth, this.options.canvas.scale, this.options.canvas.zoom);\n    this.canvas = this.canvasEntity.getCanvas();\n\n    if (this.isDrawPath) {\n      const path = this.mapEntity.getPath();\n      if (this.feetImage) {\n        this.feetEntity = new Point(this.feetImage, this.options.map.route.image.width, this.options.map.route.image.height);\n        this.canvasEntity.animatePathWithImage(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.feetEntity.getPoint());\n      } else {\n        this.canvasEntity.animatePathWithDrawing(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.options.map.route.drawing.color, this.options.map.route.drawing.printWeight);\n      }\n    }\n\n    this.container.append(this.canvas);\n  }\n};\n\nexport default class CanvasRouteMap {\n  constructor(options) {\n    if (!options || !options.container || !options.url) {\n      throw 'CanvasRouteMap constructor: missing argument container or url';\n    }\n\n    this.container = options.container;\n    this.url = options.url;\n\n    this.options = {};\n    this.options.canvas = options.canvas || {};\n    this.options.map = options.map || {};\n\n    this.options.map.startPoint = options.map.startPoint || {};\n    if (Object.keys(this.options.map.startPoint).length && !this.options.map.startPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in startPoint';\n    }\n\n    this.options.map.endPoint = options.map.endPoint || {};\n    if (Object.keys(this.options.map.endPoint).length && !this.options.map.endPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in endPoint';\n    }\n\n    this.isDrawPath = Object.keys(this.options.map.startPoint).length && Object.keys(this.options.map.endPoint).length;\n\n    this.options.map.route = options.map.route || {};\n\n    this.options.map.route.drawing = options.map.route.drawing || {};\n    this.options.map.route.image = options.map.route.image || {};\n\n    this.initialization = (async () => {\n      this.image = await loadImage(this.url);\n\n      if (this.options.map.startPoint.image) {\n        this.startPointImage = await loadImage(this.options.map.startPoint.image.url);\n      }\n      if (this.options.map.endPoint.image) {\n        this.endPointImage = await loadImage(this.options.map.endPoint.image.url);\n      }\n      if (this.options.map.route.image.url) {\n        this.feetImage = await loadImage(this.options.map.route.image.url);\n      }\n    })();\n\n    this.initialize();\n  }\n\n  async initialize() {\n    await this.initialization;\n    privateMethods.createMap.call(this);\n    privateMethods.createCanvas.call(this);\n  }\n}\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/CanvasRouteMap.js","const mouseEvents = {\n  mouseDown(e) {\n    // get the current mouse position\n    let r = this.canvas.getBoundingClientRect();\n    this.mouseX = (e.clientX - r.left) - this.canvasPosition.deltaX;\n    this.mouseY = (e.clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n  },\n  mouseUp() {\n    this.dragging = false;\n  },\n  mouseMove(e) {\n    if (this.dragging) {\n      // get the current mouse position (updates every time the mouse is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.clientX - r.left;\n      let y = e.clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.mouseX); // total distance in x\n      this.tmpCanvasPosY = (y - this.mouseY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    }\n  },\n  mouseWheel(e) {\n    let delta = 0;\n    let r = this.canvas.getBoundingClientRect();\n\n    if (e.wheelDelta) {\n      delta = e.wheelDelta / 120;\n    }\n    else if (e.detail) {\n      delta = -e.detail / 3;\n    }\n\n    let canvasZoomX = (e.clientX - r.left);\n    let canvasZoomY = (e.clientY - r.top);\n\n    if (delta > 0) {\n      if (this.zoomCount < this.clientZoom) {\n        this.zoomCount += 1;\n\n        // pinchZoomInG IN\n        this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n        this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n        // scale the image up by 2\n        this.initialImageWidth = this.initialImageWidth * 2;\n        this.zoom = this.zoom * 2;\n      }\n    } else {\n      if (this.zoomCount > -this.clientZoom) {\n        this.zoomCount -= 1;\n\n        // pinchZoomInG OUT\n        this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n        this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n        // scale the image down by 2\n        this.initialImageWidth = this.initialImageWidth / 2;\n        this.zoom = this.zoom / 2;\n      }\n    }\n    canvasEvents.updateCanvasAfterZoom.call(this);\n  },\n};\n\nconst touchEvents = {\n  touchStart(e) {\n    // get the current touch position\n    let r = this.canvas.getBoundingClientRect();\n    this.touchX = (e.touches[0].clientX - r.left) - this.canvasPosition.deltaX;\n    this.touchY = (e.touches[0].clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n\n    if (e.touches.length === 2) {\n      this.scaling = true;\n      this.dragging = false;\n      touchEvents.pinchStart.call(this, e);\n    }\n  },\n  touchEnd() {\n    this.dragging = false;\n    if (this.scaling) {\n      touchEvents.pinchEnd.call(this);\n    }\n  },\n  touchMove(e) {\n    if (this.dragging) {\n      // get the current touch position (updates every time the touch is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.touches[0].clientX - r.left;\n      let y = e.touches[0].clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.touchX); // total distance in x\n      this.tmpCanvasPosY = (y - this.touchY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    } else if (this.scaling) {\n      touchEvents.pinchMove.call(this, e);\n    }\n  },\n  pinchStart(e) {\n    this.pinchDistStart = Math.sqrt(\n        (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n        (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n  },\n  pinchEnd() {\n    this.scaling = false;\n  },\n  pinchMove(e) {\n    let r = this.canvas.getBoundingClientRect();\n\n    let dist = Math.sqrt(\n        (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n        (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n\n    let touchClientX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n    let touchClientY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n\n    let canvasZoomX = (touchClientX - r.left);\n    let canvasZoomY = (touchClientY - r.top);\n\n    this.pinchCounter += 1;\n    if (this.pinchCounter === this.fluency) {\n      this.pinchCounter = 0;\n      if (this.pinchDistStart - dist < 0) {\n        if (this.zoomCount < 2) {\n          touchEvents.pinchZoomIn.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom * 2;\n          this.zoomCount += 1;\n        }\n      }\n      else {\n        if (this.zoomCount > -2) {\n          touchEvents.pinchZoomOut.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom / 2;\n          this.zoomCount -= 1;\n        }\n      }\n      canvasEvents.updateCanvasAfterZoom.call(this);\n    }\n  },\n  pinchZoomIn(canvasZoomX, canvasZoomY) {\n    this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n    this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n    this.initialImageWidth = this.initialImageWidth * 2;\n  },\n  pinchZoomOut(canvasZoomX, canvasZoomY) {\n    this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n    this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n    this.initialImageWidth = this.initialImageWidth / 2;\n  },\n};\n\n\nconst canvasEvents = {\n  renderPath() {\n    for (let i = 0; i < this.pathBuffer.length; i += 1) {\n      if (this.feetImage) {\n        this.ctx.drawImage(this.feetImage, (this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n      } else {\n        this.ctx.fillRect((this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n      }\n    }\n  },\n  renderCanvas() {\n    // we need to clear the canvas, otherwise we'll have a bunch of overlapping images\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasWidth);\n\n    // these will be our new x,y position to move the image.\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n  },\n  updateCanvasAfterMove() {\n    //restrict canvas area\n    if (this.tmpCanvasPosX > (this.initialImageWidth / this.zoom - this.initialImageWidth * 0.2 / this.zoom) ||\n        (this.tmpCanvasPosX < -(this.initialImageWidth - this.initialImageWidth * 0.2)) ||\n        (this.tmpCanvasPosY > (this.newImageHeight / this.zoom - this.newImageHeight * 0.2 / this.zoom)) ||\n        (this.tmpCanvasPosY < -(this.newImageHeight - this.newImageHeight * 0.2))\n    ) {\n      return false;\n    }\n\n    this.canvasPosition.deltaX = this.tmpCanvasPosX;\n    this.canvasPosition.deltaY = this.tmpCanvasPosY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n  },\n  updateCanvasAfterZoom() {\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    // update the new canvas position\n    this.canvasPosition.deltaX = this.zoomedX;\n    this.canvasPosition.deltaY = this.zoomedY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n  },\n};\n\nexport default class Canvas {\n  constructor(image,\n              canvasWidth = 600,\n              canvasHeight = 600,\n              initialImageWidth = 1080,\n              scale = true,\n              zoom = 2) {\n\n    this.image = image;\n    this.imageWidth = image.width;\n    this.imageHeight = image.height;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.initialImageWidth = initialImageWidth;\n    this.scale = scale;\n    this.clientZoom = zoom;\n\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    this.canvasCenterX = this.canvasWidth / 2;\n    this.canvasCenterY = this.canvasHeight / 2;\n\n    this.canvasPosition = {\n      deltaX: 0,\n      deltaY: 0\n    };\n\n    this.pinchCounter = 0;\n    this.fluency = 5;\n    this.zoom = 1;\n    this.zoomCount = 0;\n    this.pathBuffer = [];\n\n    this.dragging = false;\n\n    if (this.scale) {\n      this.canvas.addEventListener('touchstart', touchEvents.touchStart.bind(this));\n      this.canvas.addEventListener('touchmove', touchEvents.touchMove.bind(this));\n      this.canvas.addEventListener('touchend', touchEvents.touchEnd.bind(this));\n\n      this.canvas.addEventListener('mousedown', mouseEvents.mouseDown.bind(this));\n      this.canvas.addEventListener('mousemove', mouseEvents.mouseMove.bind(this));\n      this.canvas.addEventListener('mouseup', mouseEvents.mouseUp.bind(this));\n      this.canvas.addEventListener('mousewheel', mouseEvents.mouseWheel.bind(this));\n      this.canvas.addEventListener('DOMMouseScroll', mouseEvents.mouseWheel.bind(this));\n    }\n  }\n\n  getCanvas() {\n    this.canvas.width = this.canvasWidth;\n    this.canvas.height = this.canvasHeight;\n\n    // center of the image currently\n    let imageCenterX = this.initialImageWidth / 2;\n    let imageCenterY = this.newImageHeight / 2;\n\n    // subtract the canvas size by the image center, that's how far we need to move it.\n    this.imageXPos = this.canvasCenterX - imageCenterX;\n    this.imageYPos = this.canvasCenterY - imageCenterY;\n\n    this.canvasPosition.deltaX = this.imageXPos;\n    this.canvasPosition.deltaY = this.imageYPos;\n\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            this.imageXPos,\n            this.imageYPos,\n            this.initialImageWidth,\n            this.newImageHeight);\n\n    return this.canvas;\n  }\n\n  animatePathWithImage(path, speed = 50, step = 20, image) {\n    this.feetImage = image;\n    let i = 0;\n    let timerId = setInterval(() => {\n      this.pathBuffer.push(path[i]);\n      if (this.feetImage) {\n        this.ctx.drawImage(this.feetImage, (path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n      } else {\n        this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n      }\n\n      if (i + step >= path.length) clearInterval(timerId);\n      i += step;\n    }, speed);\n\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n    this.pathBuffer = [];\n\n    setTimeout(this.animatePathWithImage.bind(this, path, speed, step, image), path.length * speed / 10);\n\n  }\n\n  animatePathWithDrawing(path, speed = 50, step = 20, color = '#f00', printWeight = 3) {\n    this.print = printWeight;\n\n    let i = 0;\n    let timerId = setInterval(() => {\n      this.pathBuffer.push(path[i]);\n      this.ctx.fillStyle = color;\n      this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n\n      if (i + step >= path.length) clearInterval(timerId);\n      i += step;\n    }, speed);\n\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n    this.pathBuffer = [];\n\n    setTimeout(this.animatePathWithDrawing.bind(this, path, speed, step, color, printWeight), path.length * speed / 10);\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Canvas.js","import './astar.js'\n\nexport default class RouteMap {\n  constructor(image, trackColor = {r: 255, g: 255, b: 255}, diagonal = true) {\n    this.image = image;\n    this.width = image.width;\n    this.height = image.height;\n    this.trackColor = trackColor;\n    this.diagonal = diagonal;\n\n  }\n\n  getMap(x = 0, y = 0) {\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            x * this.width,\n            y * this.height,\n            this.width,\n            this.height,\n            0,\n            0,\n            this.width,\n            this.height);\n\n    return this.canvas;\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getBinaryArray() {\n    const width = this.canvas.width % 2 === 0 ? this.canvas.width - 1 : this.canvas.width;\n    const height = this.canvas.height;\n    const map = this.ctx.getImageData(0, 0, width, height);\n    let imageData = map.data;\n    let r, g, b;\n    let zeroesAndOnes = [];\n    let currentInnerArray = [];\n\n    for (let p = 0, len = imageData.length; p < len; p += 4) {\n      r = imageData[p];\n      g = imageData[p + 1];\n      b = imageData[p + 2];\n\n      if (p % width * 4 === 0) {\n        currentInnerArray = [];\n        zeroesAndOnes.push(currentInnerArray);\n      }\n      if (r === this.trackColor.r && g === this.trackColor.g && b === this.trackColor.b) {\n        currentInnerArray.push(1);\n      } else {\n        currentInnerArray.push(0);\n      }\n    }\n    this.ctx.putImageData(map, 0, 0);\n\n    return zeroesAndOnes;\n  }\n\n  getPath() {\n    const arr = this.getBinaryArray();\n    let graph = new Graph(arr, {diagonal: this.options.diagonal});\n\n    let startCoordinate = graph.grid[this.options.startPoint.coordinates.y][this.options.startPoint.coordinates.x];\n    let endCoordinate = graph.grid[this.options.endPoint.coordinates.y][this.options.endPoint.coordinates.x];\n\n    return astar.search(graph, startCoordinate, endCoordinate);\n  }\n\n  drawPoint(image, x, y, position = 'up') {\n    let coordinates = {};\n\n    switch (position) {\n      case 'up':\n        coordinates.x = x - image.width / 2;\n        coordinates.y = y - image.height;\n        break;\n      case 'center':\n        coordinates.x = x;\n        coordinates.y = y;\n        break;\n    }\n\n    this.ctx\n        .drawImage(\n            image,\n            coordinates.x,\n            coordinates.y,\n            image.width,\n            image.height);\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/RouteMap.js","// javascript-astar 0.4.1\n// http://github.com/bgrins/javascript-astar\n// Freely distributable under the MIT License.\n// Implements the astar search algorithm in javascript using a Binary Heap.\n// Includes Binary Heap (with modifications) from Marijn Haverbeke.\n// http://eloquentjavascript.net/appendix2.html\n\n(function(definition) {\n    /* global module, define */\n    if(typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = definition();\n    } else if(typeof define === 'function' && define.amd) {\n        define([], definition);\n    } else {\n        var exports = definition();\n        window.astar = exports.astar;\n        window.Graph = exports.Graph;\n    }\n})(function() {\n\nfunction pathTo(node){\n    var curr = node,\n        path = [];\n    while(curr.parent) {\n        path.unshift(curr);\n        curr = curr.parent;\n    }\n    return path;\n}\n\nfunction getHeap() {\n    return new BinaryHeap(function(node) {\n        return node.f;\n    });\n}\n\nvar astar = {\n    /**\n    * Perform an A* Search on a graph given a start and end node.\n    * @param {Graph} graph\n    * @param {GridNode} start\n    * @param {GridNode} end\n    * @param {Object} [options]\n    * @param {bool} [options.closest] Specifies whether to return the\n               path to the closest node if the target is unreachable.\n    * @param {Function} [options.heuristic] Heuristic function (see\n    *          astar.heuristics).\n    */\n    search: function(graph, start, end, options) {\n        graph.cleanDirty();\n        options = options || {};\n        var heuristic = options.heuristic || astar.heuristics.manhattan,\n            closest = options.closest || false;\n\n        var openHeap = getHeap(),\n            closestNode = start; // set the start node to be the closest if required\n\n        start.h = heuristic(start, end);\n\n        openHeap.push(start);\n\n        while(openHeap.size() > 0) {\n\n            // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.\n            var currentNode = openHeap.pop();\n\n            // End case -- result has been found, return the traced path.\n            if(currentNode === end) {\n                return pathTo(currentNode);\n            }\n\n            // Normal case -- move currentNode from open to closed, process each of its neighbors.\n            currentNode.closed = true;\n\n            // Find all neighbors for the current node.\n            var neighbors = graph.neighbors(currentNode);\n\n            for (var i = 0, il = neighbors.length; i < il; ++i) {\n                var neighbor = neighbors[i];\n\n                if (neighbor.closed || neighbor.isWall()) {\n                    // Not a valid node to process, skip to next neighbor.\n                    continue;\n                }\n\n                // The g score is the shortest distance from start to current node.\n                // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\n                var gScore = currentNode.g + neighbor.getCost(currentNode),\n                    beenVisited = neighbor.visited;\n\n                if (!beenVisited || gScore < neighbor.g) {\n\n                    // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\n                    neighbor.visited = true;\n                    neighbor.parent = currentNode;\n                    neighbor.h = neighbor.h || heuristic(neighbor, end);\n                    neighbor.g = gScore;\n                    neighbor.f = neighbor.g + neighbor.h;\n                    graph.markDirty(neighbor);\n                    if (closest) {\n                        // If the neighbour is closer than the current closestNode or if it's equally close but has\n                        // a cheaper path than the current closest node then it becomes the closest node\n                        if (neighbor.h < closestNode.h || (neighbor.h === closestNode.h && neighbor.g < closestNode.g)) {\n                            closestNode = neighbor;\n                        }\n                    }\n\n                    if (!beenVisited) {\n                        // Pushing to heap will put it in proper place based on the 'f' value.\n                        openHeap.push(neighbor);\n                    }\n                    else {\n                        // Already seen the node, but since it has been rescored we need to reorder it in the heap\n                        openHeap.rescoreElement(neighbor);\n                    }\n                }\n            }\n        }\n\n        if (closest) {\n            return pathTo(closestNode);\n        }\n\n        // No result was found - empty array signifies failure to find path.\n        return [];\n    },\n    // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html\n    heuristics: {\n        manhattan: function(pos0, pos1) {\n            var d1 = Math.abs(pos1.x - pos0.x);\n            var d2 = Math.abs(pos1.y - pos0.y);\n            return d1 + d2;\n        },\n        diagonal: function(pos0, pos1) {\n            var D = 1;\n            var D2 = Math.sqrt(2);\n            var d1 = Math.abs(pos1.x - pos0.x);\n            var d2 = Math.abs(pos1.y - pos0.y);\n            return (D * (d1 + d2)) + ((D2 - (2 * D)) * Math.min(d1, d2));\n        }\n    },\n    cleanNode:function(node){\n        node.f = 0;\n        node.g = 0;\n        node.h = 0;\n        node.visited = false;\n        node.closed = false;\n        node.parent = null;\n    }\n};\n\n/**\n* A graph memory structure\n* @param {Array} gridIn 2D array of input weights\n* @param {Object} [options]\n* @param {bool} [options.diagonal] Specifies whether diagonal moves are allowed\n*/\nfunction Graph(gridIn, options) {\n    options = options || {};\n    this.nodes = [];\n    this.diagonal = !!options.diagonal;\n    this.grid = [];\n    for (var x = 0; x < gridIn.length; x++) {\n        this.grid[x] = [];\n\n        for (var y = 0, row = gridIn[x]; y < row.length; y++) {\n            var node = new GridNode(x, y, row[y]);\n            this.grid[x][y] = node;\n            this.nodes.push(node);\n        }\n    }\n    this.init();\n}\n\nGraph.prototype.init = function() {\n    this.dirtyNodes = [];\n    for (var i = 0; i < this.nodes.length; i++) {\n        astar.cleanNode(this.nodes[i]);\n    }\n};\n\nGraph.prototype.cleanDirty = function() {\n    for (var i = 0; i < this.dirtyNodes.length; i++) {\n        astar.cleanNode(this.dirtyNodes[i]);\n    }\n    this.dirtyNodes = [];\n};\n\nGraph.prototype.markDirty = function(node) {\n    this.dirtyNodes.push(node);\n};\n\nGraph.prototype.neighbors = function(node) {\n    var ret = [],\n        x = node.x,\n        y = node.y,\n        grid = this.grid;\n\n    // West\n    if(grid[x-1] && grid[x-1][y]) {\n        ret.push(grid[x-1][y]);\n    }\n\n    // East\n    if(grid[x+1] && grid[x+1][y]) {\n        ret.push(grid[x+1][y]);\n    }\n\n    // South\n    if(grid[x] && grid[x][y-1]) {\n        ret.push(grid[x][y-1]);\n    }\n\n    // North\n    if(grid[x] && grid[x][y+1]) {\n        ret.push(grid[x][y+1]);\n    }\n\n    if (this.diagonal) {\n        // Southwest\n        if(grid[x-1] && grid[x-1][y-1]) {\n            ret.push(grid[x-1][y-1]);\n        }\n\n        // Southeast\n        if(grid[x+1] && grid[x+1][y-1]) {\n            ret.push(grid[x+1][y-1]);\n        }\n\n        // Northwest\n        if(grid[x-1] && grid[x-1][y+1]) {\n            ret.push(grid[x-1][y+1]);\n        }\n\n        // Northeast\n        if(grid[x+1] && grid[x+1][y+1]) {\n            ret.push(grid[x+1][y+1]);\n        }\n    }\n\n    return ret;\n};\n\nGraph.prototype.toString = function() {\n    var graphString = [],\n        nodes = this.grid, // when using grid\n        rowDebug, row, y, l;\n    for (var x = 0, len = nodes.length; x < len; x++) {\n        rowDebug = [];\n        row = nodes[x];\n        for (y = 0, l = row.length; y < l; y++) {\n            rowDebug.push(row[y].weight);\n        }\n        graphString.push(rowDebug.join(\" \"));\n    }\n    return graphString.join(\"\\n\");\n};\n\nfunction GridNode(x, y, weight) {\n    this.x = x;\n    this.y = y;\n    this.weight = weight;\n}\n\nGridNode.prototype.toString = function() {\n    return \"[\" + this.x + \" \" + this.y + \"]\";\n};\n\nGridNode.prototype.getCost = function(fromNeighbor) {\n    // Take diagonal weight into consideration.\n    if (fromNeighbor && fromNeighbor.x != this.x && fromNeighbor.y != this.y) {\n        return this.weight * 1.41421;\n    }\n    return this.weight;\n};\n\nGridNode.prototype.isWall = function() {\n    return this.weight === 0;\n};\n\nfunction BinaryHeap(scoreFunction){\n    this.content = [];\n    this.scoreFunction = scoreFunction;\n}\n\nBinaryHeap.prototype = {\n    push: function(element) {\n        // Add the new element to the end of the array.\n        this.content.push(element);\n\n        // Allow it to sink down.\n        this.sinkDown(this.content.length - 1);\n    },\n    pop: function() {\n        // Store the first element so we can return it later.\n        var result = this.content[0];\n        // Get the element at the end of the array.\n        var end = this.content.pop();\n        // If there are any elements left, put the end element at the\n        // start, and let it bubble up.\n        if (this.content.length > 0) {\n            this.content[0] = end;\n            this.bubbleUp(0);\n        }\n        return result;\n    },\n    remove: function(node) {\n        var i = this.content.indexOf(node);\n\n        // When it is found, the process seen in 'pop' is repeated\n        // to fill up the hole.\n        var end = this.content.pop();\n\n        if (i !== this.content.length - 1) {\n            this.content[i] = end;\n\n            if (this.scoreFunction(end) < this.scoreFunction(node)) {\n                this.sinkDown(i);\n            }\n            else {\n                this.bubbleUp(i);\n            }\n        }\n    },\n    size: function() {\n        return this.content.length;\n    },\n    rescoreElement: function(node) {\n        this.sinkDown(this.content.indexOf(node));\n    },\n    sinkDown: function(n) {\n        // Fetch the element that has to be sunk.\n        var element = this.content[n];\n\n        // When at 0, an element can not sink any further.\n        while (n > 0) {\n\n            // Compute the parent element's index, and fetch it.\n            var parentN = ((n + 1) >> 1) - 1,\n                parent = this.content[parentN];\n            // Swap the elements if the parent is greater.\n            if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n                this.content[parentN] = element;\n                this.content[n] = parent;\n                // Update 'n' to continue at the new position.\n                n = parentN;\n            }\n            // Found a parent that is less, no need to sink any further.\n            else {\n                break;\n            }\n        }\n    },\n    bubbleUp: function(n) {\n        // Look up the target element and its score.\n        var length = this.content.length,\n            element = this.content[n],\n            elemScore = this.scoreFunction(element);\n\n        while(true) {\n            // Compute the indices of the child elements.\n            var child2N = (n + 1) << 1,\n                child1N = child2N - 1;\n            // This is used to store the new position of the element, if any.\n            var swap = null,\n                child1Score;\n            // If the first child exists (is inside the array)...\n            if (child1N < length) {\n                // Look it up and compute its score.\n                var child1 = this.content[child1N];\n                child1Score = this.scoreFunction(child1);\n\n                // If the score is less than our element's, we need to swap.\n                if (child1Score < elemScore){\n                    swap = child1N;\n                }\n            }\n\n            // Do the same checks for the other child.\n            if (child2N < length) {\n                var child2 = this.content[child2N],\n                    child2Score = this.scoreFunction(child2);\n                if (child2Score < (swap === null ? elemScore : child1Score)) {\n                    swap = child2N;\n                }\n            }\n\n            // If the element needs to be moved, swap it, and continue.\n            if (swap !== null) {\n                this.content[n] = this.content[swap];\n                this.content[swap] = element;\n                n = swap;\n            }\n            // Otherwise, we are done.\n            else {\n                break;\n            }\n        }\n    }\n};\n\nreturn {\n    astar: astar,\n    Graph: Graph\n};\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/astar.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 5\n// module chunks = 0","export default class Point {\n  constructor(image, width, height) {\n    this.image = image;\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = width || this.image.width;\n    this.canvas.height = height || this.image.height;\n  }\n\n  getPoint() {\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            0,\n            0,\n            this.canvas.width,\n            this.canvas.height);\n    return this.canvas;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Point.js","export function loadImage(url) {\n  return new Promise(resolve => {\n    const image = new Image();\n\n    image.addEventListener('load', () => {\n      resolve(image);\n    });\n    image.src = url;\n    image.crossOrigin = 'Anonymous';\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders.js"],"sourceRoot":""}
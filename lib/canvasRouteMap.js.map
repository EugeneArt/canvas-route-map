{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3f4e874949d4ab735271","webpack:///./src/astar.js","webpack:///./src/index.js","webpack:///./src/CanvasRouteMap.js","webpack:///./src/Canvas.js","webpack:///./src/RouteMap.js","webpack:///./src/BinaryHeap.js","webpack:///./src/Graph.js","webpack:///./src/GridNode.js","webpack:///./src/Point.js","webpack:///./src/loaders.js"],"names":["pathTo","node","curr","path","parent","unshift","getHeap","f","astar","search","graph","start","end","options","cleanDirty","heuristic","heuristics","manhattan","closest","openHeap","closestNode","h","push","size","currentNode","pop","closed","neighbors","i","il","length","neighbor","isWall","gScore","g","getCost","beenVisited","visited","markDirty","rescoreElement","pos0","pos1","d1","Math","abs","x","d2","y","diagonal","D","D2","sqrt","min","cleanNode","CanvasRouteMap","privateMethods","createMap","mapEntity","image","map","trackColor","mapCanvas","getMap","Object","keys","setOptions","createCanvas","canvasEntity","canvas","width","height","initialWidth","scale","zoom","startCoordinate","getCanvas","startPointImage","startPointEntity","startPoint","drawPoint","getPoint","coordinates","position","endPointImage","endPointEntity","endPoint","isDrawPath","getPath","feetImage","feetEntity","route","animatePathWithImage","animateSpeed","step","animatePathWithDrawing","drawing","color","printWeight","container","append","url","initialization","initialize","call","callback","mouseEvents","mouseDown","e","r","getBoundingClientRect","mouseX","clientX","left","canvasPosition","deltaX","mouseY","clientY","top","deltaY","dragging","mouseUp","mouseMove","tmpCanvasPosX","tmpCanvasPosY","canvasEvents","updateCanvasAfterMove","mouseWheel","delta","wheelDelta","detail","canvasZoomX","canvasZoomY","zoomCount","clientZoom","zoomedX","zoomedY","initialImageWidth","updateCanvasAfterZoom","touchEvents","touchStart","touchX","touches","touchY","scaling","pinchStart","touchEnd","pinchEnd","touchMove","pinchMove","pinchDistStart","dist","touchClientX","touchClientY","pinchCounter","fluency","pinchZoomIn","pinchZoomOut","renderPath","pathBuffer","ctx","drawImage","fillRect","print","renderCanvas","clearRect","canvasWidth","newImageHeight","renverPointImages","pointImages","forEach","item","imageHeight","imageWidth","Canvas","canvasHeight","document","createElement","getContext","canvasCenterX","canvasCenterY","addEventListener","bind","imageCenterX","imageCenterY","imageXPos","imageYPos","speed","animate","timerId","setTimeout","requestAnimationFrame","cancelAnimationFrame","clearInterval","fillStyle","RouteMap","b","getImageData","imageData","data","zeroesAndOnes","currentInnerArray","p","len","putImageData","arr","getBinaryArray","grid","endCoordinate","BinaryHeap","scoreFunction","content","element","sinkDown","result","bubbleUp","indexOf","n","parentN","elemScore","child2N","child1N","swap","child1Score","child1","child2","child2Score","Graph","gridIn","nodes","row","init","dirtyNodes","ret","graphString","rowDebug","l","weight","join","GridNode","fromNeighbor","Point","loadImage","Promise","Image","crossOrigin","resolve","src"],"mappings":"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","file":"canvasRouteMap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"canvasRouteMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"canvasRouteMap\"] = factory();\n\telse\n\t\troot[\"canvasRouteMap\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3f4e874949d4ab735271","import BinaryHeap from './BinaryHeap.js';\n\nfunction pathTo(node){\n    let curr = node,\n        path = [];\n    while(curr.parent) {\n        path.unshift(curr);\n        curr = curr.parent;\n    }\n    return path;\n}\n\nfunction getHeap() {\n    return new BinaryHeap(function(node) {\n        return node.f;\n    });\n}\n\nexport const astar = {\n    search: function(graph, start, end, options) {\n        graph.cleanDirty();\n        options = options || {};\n        let heuristic = options.heuristic || astar.heuristics.manhattan,\n            closest = options.closest || false;\n\n        let openHeap = getHeap(),\n            closestNode = start; // set the start node to be the closest if required\n\n        start.h = heuristic(start, end);\n\n        openHeap.push(start);\n\n        while(openHeap.size() > 0) {\n\n            // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.\n            let currentNode = openHeap.pop();\n\n            // End case -- result has been found, return the traced path.\n            if(currentNode === end) {\n                return pathTo(currentNode);\n            }\n\n            // Normal case -- move currentNode from open to closed, process each of its neighbors.\n            currentNode.closed = true;\n\n            // Find all neighbors for the current node.\n            let neighbors = graph.neighbors(currentNode);\n\n            for (let i = 0, il = neighbors.length; i < il; ++i) {\n                let neighbor = neighbors[i];\n\n                if (neighbor.closed || neighbor.isWall()) {\n                    // Not a valid node to process, skip to next neighbor.\n                    continue;\n                }\n\n                // The g score is the shortest distance from start to current node.\n                // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\n                let gScore = currentNode.g + neighbor.getCost(currentNode),\n                    beenVisited = neighbor.visited;\n\n                if (!beenVisited || gScore < neighbor.g) {\n\n                    // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\n                    neighbor.visited = true;\n                    neighbor.parent = currentNode;\n                    neighbor.h = neighbor.h || heuristic(neighbor, end);\n                    neighbor.g = gScore;\n                    neighbor.f = neighbor.g + neighbor.h;\n                    graph.markDirty(neighbor);\n                    if (closest) {\n                        // If the neighbour is closer than the current closestNode or if it's equally close but has\n                        // a cheaper path than the current closest node then it becomes the closest node\n                        if (neighbor.h < closestNode.h || (neighbor.h === closestNode.h && neighbor.g < closestNode.g)) {\n                            closestNode = neighbor;\n                        }\n                    }\n\n                    if (!beenVisited) {\n                        // Pushing to heap will put it in proper place based on the 'f' value.\n                        openHeap.push(neighbor);\n                    }\n                    else {\n                        // Already seen the node, but since it has been rescored we need to reorder it in the heap\n                        openHeap.rescoreElement(neighbor);\n                    }\n                }\n            }\n        }\n\n        if (closest) {\n            return pathTo(closestNode);\n        }\n\n        // No result was found - empty array signifies failure to find path.\n        return [];\n    },\n    // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html\n    heuristics: {\n        manhattan: function(pos0, pos1) {\n            let d1 = Math.abs(pos1.x - pos0.x);\n            var d2 = Math.abs(pos1.y - pos0.y);\n            return d1 + d2;\n        },\n        diagonal: function(pos0, pos1) {\n            let D = 1;\n            let D2 = Math.sqrt(2);\n            let d1 = Math.abs(pos1.x - pos0.x);\n            let d2 = Math.abs(pos1.y - pos0.y);\n            return (D * (d1 + d2)) + ((D2 - (2 * D)) * Math.min(d1, d2));\n        }\n    },\n    cleanNode:function(node){\n        node.f = 0;\n        node.g = 0;\n        node.h = 0;\n        node.visited = false;\n        node.closed = false;\n        node.parent = null;\n    }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/astar.js","import CanvasRouteMap from './CanvasRouteMap.js';\nexport { CanvasRouteMap };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Canvas from './Canvas.js';\nimport RouteMap from './RouteMap.js';\nimport Point from './Point.js';\nimport {loadImage} from './loaders.js';\n\nconst privateMethods = {\n  createMap() {\n    this.mapEntity = new RouteMap(this.image, this.options.map.trackColor, this.options.map.diagonal);\n    this.mapCanvas = this.mapEntity.getMap();\n\n    if (Object.keys(this.options.map).length) {\n      this.mapEntity.setOptions(this.options.map);\n    }\n  },\n  createCanvas() {\n\n    this.canvasEntity = new Canvas(this.mapCanvas, this.options.canvas.width, this.options.canvas.height, this.options.canvas.initialWidth, this.options.canvas.scale, this.options.canvas.zoom, this.startCoordinate);\n    this.canvas = this.canvasEntity.getCanvas();\n\n    if (this.startPointImage) {\n      const startPointEntity = new Point(this.startPointImage, this.options.map.startPoint.image.width, this.options.map.startPoint.image.height);\n      this.canvasEntity.drawPoint(startPointEntity.getPoint(), this.options.map.startPoint.coordinates.x, this.options.map.startPoint.coordinates.y, this.options.map.startPoint.image.position);\n    }\n    if (this.endPointImage) {\n      const endPointEntity = new Point(this.endPointImage, this.options.map.endPoint.image.width, this.options.map.endPoint.image.height);\n      this.canvasEntity.drawPoint(endPointEntity.getPoint(), this.options.map.endPoint.coordinates.x, this.options.map.endPoint.coordinates.y, this.options.map.endPoint.image.position);\n    }\n\n    if (this.isDrawPath) {\n      const path = this.mapEntity.getPath();\n      if (this.feetImage) {\n        this.feetEntity = new Point(this.feetImage, this.options.map.route.image.width, this.options.map.route.image.height);\n        this.canvasEntity.animatePathWithImage(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.feetEntity.getPoint());\n      } else {\n        this.canvasEntity.animatePathWithDrawing(path, this.options.map.route.animateSpeed, this.options.map.route.step, this.options.map.route.drawing.color, this.options.map.route.drawing.printWeight);\n      }\n    }\n\n    this.container.append(this.canvas);\n\n  }\n};\n\nexport default class CanvasRouteMap {\n  constructor(options) {\n    if (!options || !options.container || !options.url) {\n      throw 'CanvasRouteMap constructor: missing argument container or url';\n    }\n\n    this.container = options.container;\n    this.url = options.url;\n\n    this.options = {};\n    this.options.canvas = options.canvas || {};\n    this.options.map = options.map || {};\n\n    this.options.map.startPoint = this.options.map.startPoint || {};\n    if (Object.keys(this.options.map.startPoint).length && !this.options.map.startPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in startPoint';\n    }\n\n    this.options.map.endPoint = this.options.map.endPoint || {};\n    if (Object.keys(this.options.map.endPoint).length && !this.options.map.endPoint.coordinates) {\n      throw 'CanvasRouteMap constructor: missing argument coordinates in endPoint';\n    }\n\n    if (Object.keys(this.options.map.startPoint).length && this.options.map.startPoint.coordinates && Object.keys(this.options.map)) {\n      this.startCoordinate = this.options.map.startPoint.coordinates;\n    } else {\n      this.startCoordinate = {};\n    }\n\n    this.isDrawPath = Object.keys(this.options.map.startPoint).length && Object.keys(this.options.map.endPoint).length;\n\n    this.options.map.route = this.options.map.route || {};\n\n    this.options.map.route.drawing = this.options.map.route.drawing || {};\n    this.options.map.route.image = this.options.map.route.image || {};\n\n    this.initialization = (async () => {\n      this.image = await loadImage(this.url);\n\n      if (this.options.map.startPoint.image) {\n        this.startPointImage = await loadImage(this.options.map.startPoint.image.url);\n      }\n      if (this.options.map.endPoint.image) {\n        this.endPointImage = await loadImage(this.options.map.endPoint.image.url);\n      }\n      if (this.options.map.route.image.url) {\n        this.feetImage = await loadImage(this.options.map.route.image.url);\n      }\n    })();\n\n    this.initialize();\n  }\n\n  async initialize() {\n    await this.initialization;\n    privateMethods.createMap.call(this);\n    privateMethods.createCanvas.call(this);\n  }\n\n  async ready(callback) {\n    await this.initialization;\n    callback.call(this);\n  }\n}\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/CanvasRouteMap.js","const mouseEvents = {\n  mouseDown(e) {\n    // get the current mouse position\n    let r = this.canvas.getBoundingClientRect();\n    this.mouseX = (e.clientX - r.left) - this.canvasPosition.deltaX;\n    this.mouseY = (e.clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n  },\n  mouseUp() {\n    this.dragging = false;\n  },\n  mouseMove(e) {\n    if (this.dragging) {\n      // get the current mouse position (updates every time the mouse is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.clientX - r.left;\n      let y = e.clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.mouseX); // total distance in x\n      this.tmpCanvasPosY = (y - this.mouseY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    }\n  },\n  mouseWheel(e) {\n    let delta = 0;\n    let r = this.canvas.getBoundingClientRect();\n\n    if (e.wheelDelta) {\n      delta = e.wheelDelta / 120;\n    }\n    else if (e.detail) {\n      delta = -e.detail / 3;\n    }\n\n    let canvasZoomX = (e.clientX - r.left);\n    let canvasZoomY = (e.clientY - r.top);\n\n    if (delta > 0) {\n      if (this.zoomCount < this.clientZoom) {\n        this.zoomCount += 1;\n\n        // pinchZoomInG IN\n        this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n        this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n        // scale the image up by 2\n        this.initialImageWidth = this.initialImageWidth * 2;\n        this.zoom = this.zoom * 2;\n      }\n    } else {\n      if (this.zoomCount > -this.clientZoom) {\n        this.zoomCount -= 1;\n\n        // pinchZoomInG OUT\n        this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n        this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n        // scale the image down by 2\n        this.initialImageWidth = this.initialImageWidth / 2;\n        this.zoom = this.zoom / 2;\n      }\n    }\n    canvasEvents.updateCanvasAfterZoom.call(this);\n  },\n};\n\nconst touchEvents = {\n  touchStart(e) {\n    // get the current touch position\n    let r = this.canvas.getBoundingClientRect();\n    this.touchX = (e.touches[0].clientX - r.left) - this.canvasPosition.deltaX;\n    this.touchY = (e.touches[0].clientY - r.top) - this.canvasPosition.deltaY;\n\n    this.dragging = true;\n\n    if (e.touches.length === 2) {\n      this.scaling = true;\n      this.dragging = false;\n      touchEvents.pinchStart.call(this, e);\n    }\n  },\n  touchEnd() {\n    this.dragging = false;\n    if (this.scaling) {\n      touchEvents.pinchEnd.call(this);\n    }\n  },\n  touchMove(e) {\n    if (this.dragging) {\n      // get the current touch position (updates every time the touch is moved durring dragging)\n      let r = this.canvas.getBoundingClientRect();\n      let x = e.touches[0].clientX - r.left;\n      let y = e.touches[0].clientY - r.top;\n\n      // calculate how far we moved\n      this.tmpCanvasPosX = (x - this.touchX); // total distance in x\n      this.tmpCanvasPosY = (y - this.touchY); // total distance in y\n\n      canvasEvents.updateCanvasAfterMove.call(this);\n    } else if (this.scaling) {\n      touchEvents.pinchMove.call(this, e);\n    }\n  },\n  pinchStart(e) {\n    this.pinchDistStart = Math.sqrt(\n      (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n      (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n  },\n  pinchEnd() {\n    this.scaling = false;\n  },\n  pinchMove(e) {\n    let r = this.canvas.getBoundingClientRect();\n\n    let dist = Math.sqrt(\n      (e.touches[0].clientX - e.touches[1].clientX) * (e.touches[0].clientX - e.touches[1].clientX) +\n      (e.touches[0].clientY - e.touches[1].clientY) * (e.touches[0].clientY - e.touches[1].clientY)\n    );\n\n    let touchClientX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n    let touchClientY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n\n    let canvasZoomX = (touchClientX - r.left);\n    let canvasZoomY = (touchClientY - r.top);\n\n    this.pinchCounter += 1;\n    if (this.pinchCounter === this.fluency) {\n      this.pinchCounter = 0;\n      if (this.pinchDistStart - dist < 0) {\n        if (this.zoomCount < 2) {\n          touchEvents.pinchZoomIn.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom * 2;\n          this.zoomCount += 1;\n        }\n      }\n      else {\n        if (this.zoomCount > -2) {\n          touchEvents.pinchZoomOut.call(this, canvasZoomX, canvasZoomY);\n          this.zoom = this.zoom / 2;\n          this.zoomCount -= 1;\n        }\n      }\n      canvasEvents.updateCanvasAfterZoom.call(this);\n    }\n  },\n  pinchZoomIn(canvasZoomX, canvasZoomY) {\n    this.zoomedX = this.canvasPosition.deltaX - (canvasZoomX - this.canvasPosition.deltaX);\n    this.zoomedY = this.canvasPosition.deltaY - (canvasZoomY - this.canvasPosition.deltaY);\n\n    this.initialImageWidth = this.initialImageWidth * 2;\n  },\n  pinchZoomOut(canvasZoomX, canvasZoomY) {\n    this.zoomedX = (this.canvasPosition.deltaX + canvasZoomX) / 2;\n    this.zoomedY = (this.canvasPosition.deltaY + canvasZoomY) / 2;\n\n    this.initialImageWidth = this.initialImageWidth / 2;\n  },\n};\n\n\nconst canvasEvents = {\n  renderPath() {\n    for (let i = 0; i < this.pathBuffer.length; i += 1) {\n      if (this.feetImage) {\n        this.ctx.drawImage(this.feetImage, (this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n      } else {\n        this.ctx.fillRect((this.pathBuffer[i].y * this.zoom + this.canvasPosition.deltaX), (this.pathBuffer[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n      }\n    }\n  },\n  renderCanvas() {\n    // we need to clear the canvas, otherwise we'll have a bunch of overlapping images\n    this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasWidth);\n\n    // these will be our new x,y position to move the image.\n    this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n    canvasEvents.renverPointImages.call(this);\n  },\n  renverPointImages() {\n    if (this.pointImages) {\n      this.pointImages.forEach((item) => {\n        let coordinates = {};\n\n        switch (item.position) {\n          case 'up':\n            coordinates.x = item.x * this.zoom + this.canvasPosition.deltaX - item.image.width / 2 * this.zoom;\n            coordinates.y = item.y * this.zoom + this.canvasPosition.deltaY - item.image.height * this.zoom;\n            break;\n          case 'center':\n            coordinates.x = item.x * this.zoom + this.canvasPosition.deltaX;\n            coordinates.y = item.y * this.zoom + this.canvasPosition.deltaY;\n            break;\n        }\n\n        this.ctx\n          .drawImage(\n            item.image,\n            coordinates.x,\n            coordinates.y,\n            item.image.width * this.zoom,\n            item.image.height * this.zoom);\n      })\n    }\n  },\n  updateCanvasAfterMove() {\n    //restrict canvas area\n    if (this.tmpCanvasPosX > (this.initialImageWidth / this.zoom - this.initialImageWidth * 0.5 / this.zoom) ||\n      (this.tmpCanvasPosX < -(this.initialImageWidth - this.initialImageWidth * 0.3)) ||\n      (this.tmpCanvasPosY > (this.newImageHeight / this.zoom - this.newImageHeight * 0.3 / this.zoom)) ||\n      (this.tmpCanvasPosY < -(this.newImageHeight - this.newImageHeight * 0.3))\n    ) {\n      return false;\n    }\n\n    this.canvasPosition.deltaX = this.tmpCanvasPosX;\n    this.canvasPosition.deltaY = this.tmpCanvasPosY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n    canvasEvents.renverPointImages.call(this);\n  },\n  updateCanvasAfterZoom() {\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    // update the new canvas position\n    this.canvasPosition.deltaX = this.zoomedX;\n    this.canvasPosition.deltaY = this.zoomedY;\n\n    canvasEvents.renderCanvas.call(this);\n    canvasEvents.renderPath.call(this);\n    canvasEvents.renverPointImages.call(this);\n  },\n};\n\nexport default class Canvas {\n  constructor(image,\n              canvasWidth = 600,\n              canvasHeight = 600,\n              initialImageWidth = 1080,\n              scale = true,\n              zoom = 2,\n              coordinates) {\n\n    this.image = image;\n    this.imageWidth = image.width;\n    this.imageHeight = image.height;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.initialImageWidth = initialImageWidth;\n    this.scale = scale;\n    this.clientZoom = zoom;\n    this.coordinates = coordinates;\n\n    this.newImageHeight = this.imageHeight / this.imageWidth * this.initialImageWidth;\n\n    this.canvasCenterX = this.canvasWidth / 2;\n    this.canvasCenterY = this.canvasHeight / 2;\n\n    this.canvasPosition = {\n      deltaX: 0,\n      deltaY: 0\n    };\n\n    this.pinchCounter = 0;\n    this.fluency = 5;\n    this.zoom = 1;\n    this.zoomCount = 0;\n    this.pathBuffer = [];\n    this.pointImages = [];\n\n    this.dragging = false;\n\n    if (this.scale) {\n      this.canvas.addEventListener('touchstart', touchEvents.touchStart.bind(this));\n      this.canvas.addEventListener('touchmove', touchEvents.touchMove.bind(this));\n      this.canvas.addEventListener('touchend', touchEvents.touchEnd.bind(this));\n\n      this.canvas.addEventListener('mousedown', mouseEvents.mouseDown.bind(this));\n      this.canvas.addEventListener('mousemove', mouseEvents.mouseMove.bind(this));\n      this.canvas.addEventListener('mouseup', mouseEvents.mouseUp.bind(this));\n      this.canvas.addEventListener('mousewheel', mouseEvents.mouseWheel.bind(this));\n      this.canvas.addEventListener('DOMMouseScroll', mouseEvents.mouseWheel.bind(this));\n    }\n  }\n\n  getCanvas() {\n    this.canvas.width = this.canvasWidth;\n    this.canvas.height = this.canvasHeight;\n\n    // center of the image currently\n    let imageCenterX = this.coordinates.x || this.initialImageWidth / 2;\n    let imageCenterY = this.coordinates.y || this.newImageHeight / 2;\n\n    // subtract the canvas size by the image center, that's how far we need to move it.\n    this.imageXPos = this.canvasCenterX - imageCenterX;\n    this.imageYPos = this.canvasCenterY - imageCenterY;\n\n    this.canvasPosition.deltaX = this.imageXPos;\n    this.canvasPosition.deltaY = this.imageYPos;\n\n    this.canvas\n      .getContext('2d')\n      .drawImage(\n        this.image,\n        this.imageXPos,\n        this.imageYPos,\n        this.initialImageWidth,\n        this.newImageHeight);\n\n    return this.canvas;\n  }\n\n  drawPoint(image, x, y, position = 'up') {\n    if (this.pointImages.length < 2) {\n      this.pointImages.push({\n        image: image,\n        x: x,\n        y: y,\n        position: position\n      });\n    }\n\n    let coordinates = {};\n\n    switch (position) {\n      case 'up':\n        coordinates.x = x * this.zoom + this.canvasPosition.deltaX - image.width / 2 * this.zoom;\n        coordinates.y = y * this.zoom + this.canvasPosition.deltaY - image.height * this.zoom;\n        break;\n      case 'center':\n        coordinates.x = x * this.zoom + this.canvasPosition.deltaX;\n        coordinates.y = y * this.zoom + this.canvasPosition.deltaY;\n        break;\n    }\n\n    this.ctx\n      .drawImage(\n        image,\n        coordinates.x,\n        coordinates.y,\n        image.width * this.zoom,\n        image.height * this.zoom);\n\n  }\n\n  animatePathWithImage(path, speed = 50, step = 20, image) {\n    this.feetImage = image;\n    animate.call(this);\n\n    let i = 0;\n    let timerId;\n\n    function animate() {\n      setTimeout(() => {\n        timerId = requestAnimationFrame(animate.bind(this));\n        if (!path[i]) {\n          cancelAnimationFrame(timerId);\n          throw `Can't get a point coordinate. Please check the coordinates`;\n        }\n        this.pathBuffer.push(path[i]);\n        if (this.feetImage) {\n          this.ctx.drawImage(this.feetImage, (path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.feetImage.width * this.zoom, this.feetImage.height * this.zoom);\n        } else {\n          this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n        }\n\n        if (i + step >= path.length) {\n          clearInterval(timerId);\n          this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n          this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n          canvasEvents.renverPointImages.call(this);\n          this.pathBuffer = [];\n          i = 0;\n          timerId = requestAnimationFrame(animate.bind(this));\n        } else {\n          i += step;\n        }\n      }, step / speed * 100);\n    }\n\n  }\n\n  animatePathWithDrawing(path, speed = 50, step = 20, color = '#f00', printWeight = 3) {\n    this.print = printWeight;\n    this.ctx.fillStyle = color;\n    animate.call(this);\n\n    let i = 0;\n    let timerId;\n\n    function animate() {\n      setTimeout(() => {\n        timerId = requestAnimationFrame(animate.bind(this));\n        if (!path[i]) {\n          cancelAnimationFrame(timerId);\n          throw `Can't get a point coordinate. Please check the coordinates`;\n        }\n        this.pathBuffer.push(path[i]);\n        this.ctx.fillRect((path[i].y * this.zoom + this.canvasPosition.deltaX), (path[i].x * this.zoom + this.canvasPosition.deltaY), this.print * this.zoom, this.print * this.zoom);\n        if (i + step >= path.length) {\n          cancelAnimationFrame(timerId);\n          this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n          this.ctx.drawImage(this.image, this.canvasPosition.deltaX, this.canvasPosition.deltaY, this.initialImageWidth, this.newImageHeight);\n          if (this.pointImages) {\n            this.pointImages.forEach((item) => {\n              this.drawPoint(item.image, item.x, item.y);\n            })\n          }\n          this.pathBuffer = [];\n          i = 0;\n          timerId = requestAnimationFrame(animate.bind(this));\n        } else {\n          i += step;\n        }\n      }, step / speed * 100);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Canvas.js","import {astar} from'./astar.js';\nimport Graph from './Graph.js';\n\nexport default class RouteMap {\n  constructor(image, trackColor = {r: 255, g: 255, b: 255}, diagonal = true) {\n    this.image = image;\n    this.width = image.width;\n    this.height = image.height;\n    this.trackColor = trackColor;\n    this.diagonal = diagonal;\n\n  }\n\n  getMap(x = 0, y = 0) {\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            x * this.width,\n            y * this.height,\n            this.width,\n            this.height,\n            0,\n            0,\n            this.width,\n            this.height);\n\n    return this.canvas;\n  }\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getBinaryArray() {\n    const width = this.canvas.width % 2 === 0 ? this.canvas.width - 1 : this.canvas.width;\n    const height = this.canvas.height;\n    const map = this.ctx.getImageData(0, 0, width, height);\n    let imageData = map.data;\n    let r, g, b;\n    let zeroesAndOnes = [];\n    let currentInnerArray = [];\n\n    for (let p = 0, len = imageData.length; p < len; p += 4) {\n      r = imageData[p];\n      g = imageData[p + 1];\n      b = imageData[p + 2];\n\n      if (p % width * 4 === 0) {\n        currentInnerArray = [];\n        zeroesAndOnes.push(currentInnerArray);\n      }\n      if (r === this.trackColor.r && g === this.trackColor.g && b === this.trackColor.b) {\n        currentInnerArray.push(1);\n      } else {\n        currentInnerArray.push(0);\n      }\n    }\n    this.ctx.putImageData(map, 0, 0);\n\n    return zeroesAndOnes;\n  }\n\n  getPath() {\n    const arr = this.getBinaryArray();\n    let graph = new Graph(arr, {diagonal: this.options.diagonal});\n    let startCoordinate = graph.grid[this.options.startPoint.coordinates.y][this.options.startPoint.coordinates.x];\n    let endCoordinate = graph.grid[this.options.endPoint.coordinates.y][this.options.endPoint.coordinates.x];\n\n    return astar.search(graph, startCoordinate, endCoordinate);\n  }\n\n  drawPoint(image, x, y, position = 'up') {\n    let coordinates = {};\n\n    switch (position) {\n      case 'up':\n        coordinates.x = x - image.width / 2;\n        coordinates.y = y - image.height;\n        break;\n      case 'center':\n        coordinates.x = x;\n        coordinates.y = y;\n        break;\n    }\n\n    this.ctx\n        .drawImage(\n            image,\n            coordinates.x,\n            coordinates.y,\n            image.width,\n            image.height);\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RouteMap.js","export default class BinaryHeap {\n  constructor(scoreFunction) {\n    this.content = [];\n    this.scoreFunction = scoreFunction;\n  }\n\n  push(element) {\n    // Add the new element to the end of the array.\n    this.content.push(element);\n\n    // Allow it to sink down.\n    this.sinkDown(this.content.length - 1);\n  }\n\n  pop() {\n    // Store the first element so we can return it later.\n    let result = this.content[0];\n    // Get the element at the end of the array.\n    let end = this.content.pop();\n    // If there are any elements left, put the end element at the\n    // start, and let it bubble up.\n    if (this.content.length > 0) {\n      this.content[0] = end;\n      this.bubbleUp(0);\n    }\n    return result;\n  }\n\n  remove(node) {\n    let i = this.content.indexOf(node);\n\n    // When it is found, the process seen in 'pop' is repeated\n    // to fill up the hole.\n    let end = this.content.pop();\n\n    if (i !== this.content.length - 1) {\n      this.content[i] = end;\n\n      if (this.scoreFunction(end) < this.scoreFunction(node)) {\n        this.sinkDown(i);\n      }\n      else {\n        this.bubbleUp(i);\n      }\n    }\n  }\n\n  size() {\n    return this.content.length;\n  }\n\n  rescoreElement(node) {\n    this.sinkDown(this.content.indexOf(node));\n  }\n\n  sinkDown(n) {\n    // Fetch the element that has to be sunk.\n    let element = this.content[n];\n\n    // When at 0, an element can not sink any further.\n    while (n > 0) {\n\n      // Compute the parent element's index, and fetch it.\n      let parentN = ((n + 1) >> 1) - 1,\n        parent = this.content[parentN];\n      // Swap the elements if the parent is greater.\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n        this.content[parentN] = element;\n        this.content[n] = parent;\n        // Update 'n' to continue at the new position.\n        n = parentN;\n      }\n      // Found a parent that is less, no need to sink any further.\n      else {\n        break;\n      }\n    }\n  }\n\n  bubbleUp(n) {\n    // Look up the target element and its score.\n    let length = this.content.length,\n      element = this.content[n],\n      elemScore = this.scoreFunction(element);\n\n    while (true) {\n      // Compute the indices of the child elements.\n      let child2N = (n + 1) << 1,\n        child1N = child2N - 1;\n      // This is used to store the new position of the element, if any.\n      let swap = null,\n        child1Score;\n      // If the first child exists (is inside the array)...\n      if (child1N < length) {\n        // Look it up and compute its score.\n        let child1 = this.content[child1N];\n        child1Score = this.scoreFunction(child1);\n\n        // If the score is less than our element's, we need to swap.\n        if (child1Score < elemScore) {\n          swap = child1N;\n        }\n      }\n\n      // Do the same checks for the other child.\n      if (child2N < length) {\n        let child2 = this.content[child2N],\n          child2Score = this.scoreFunction(child2);\n        if (child2Score < (swap === null ? elemScore : child1Score)) {\n          swap = child2N;\n        }\n      }\n\n      // If the element needs to be moved, swap it, and continue.\n      if (swap !== null) {\n        this.content[n] = this.content[swap];\n        this.content[swap] = element;\n        n = swap;\n      }\n      // Otherwise, we are done.\n      else {\n        break;\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BinaryHeap.js","import GridNode from './GridNode.js';\nimport {astar} from'./astar.js';\n\nexport default class Graph {\n  constructor(gridIn, options) {\n    options = options || {};\n    this.nodes = [];\n    this.diagonal = !!options.diagonal;\n    this.grid = [];\n    for (let x = 0; x < gridIn.length; x++) {\n      this.grid[x] = [];\n\n      for (let y = 0, row = gridIn[x]; y < row.length; y++) {\n        let node = new GridNode(x, y, row[y]);\n        this.grid[x][y] = node;\n        this.nodes.push(node);\n      }\n    }\n    this.init.call(this);\n  }\n\n  init() {\n    this.dirtyNodes = [];\n    for (let i = 0; i < this.nodes.length; i++) {\n      astar.cleanNode(this.nodes[i]);\n    }\n  }\n\n  cleanDirty() {\n    for (let i = 0; i < this.dirtyNodes.length; i++) {\n      astar.cleanNode(this.dirtyNodes[i]);\n    }\n    this.dirtyNodes = [];\n  }\n\n  markDirty(node) {\n    this.dirtyNodes.push(node);\n  }\n\n  neighbors(node) {\n    let ret = [],\n      x = node.x,\n      y = node.y,\n      grid = this.grid;\n\n    // West\n    if (grid[x - 1] && grid[x - 1][y]) {\n      ret.push(grid[x - 1][y]);\n    }\n\n    // East\n    if (grid[x + 1] && grid[x + 1][y]) {\n      ret.push(grid[x + 1][y]);\n    }\n\n    // South\n    if (grid[x] && grid[x][y - 1]) {\n      ret.push(grid[x][y - 1]);\n    }\n\n    // North\n    if (grid[x] && grid[x][y + 1]) {\n      ret.push(grid[x][y + 1]);\n    }\n\n    if (this.diagonal) {\n      // Southwest\n      if (grid[x - 1] && grid[x - 1][y - 1]) {\n        ret.push(grid[x - 1][y - 1]);\n      }\n\n      // Southeast\n      if (grid[x + 1] && grid[x + 1][y - 1]) {\n        ret.push(grid[x + 1][y - 1]);\n      }\n\n      // Northwest\n      if (grid[x - 1] && grid[x - 1][y + 1]) {\n        ret.push(grid[x - 1][y + 1]);\n      }\n\n      // Northeast\n      if (grid[x + 1] && grid[x + 1][y + 1]) {\n        ret.push(grid[x + 1][y + 1]);\n      }\n    }\n\n    return ret;\n  }\n\n  toString() {\n    let graphString = [],\n      nodes = this.grid, // when using grid\n      rowDebug, row, y, l;\n    for (let x = 0, len = nodes.length; x < len; x++) {\n      rowDebug = [];\n      row = nodes[x];\n      for (y = 0, l = row.length; y < l; y++) {\n        rowDebug.push(row[y].weight);\n      }\n      graphString.push(rowDebug.join(\" \"));\n    }\n    return graphString.join(\"\\n\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Graph.js","export default class GridNode {\n  constructor(x, y, weight) {\n    this.x = x;\n    this.y = y;\n    this.weight = weight;\n  }\n\n  toString() {\n    return \"[\" + this.x + \" \" + this.y + \"]\";\n  }\n\n  getCost(fromNeighbor) {\n    // Take diagonal weight into consideration.\n    if (fromNeighbor && fromNeighbor.x != this.x && fromNeighbor.y != this.y) {\n      return this.weight * 1.41421;\n    }\n    return this.weight;\n  }\n\n  isWall() {\n    return this.weight === 0;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/GridNode.js","export default class Point {\n  constructor(image, width, height) {\n    this.image = image;\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = width || this.image.width;\n    this.canvas.height = height || this.image.height;\n  }\n\n  getPoint() {\n    this.canvas\n        .getContext('2d')\n        .drawImage(\n            this.image,\n            0,\n            0,\n            this.canvas.width,\n            this.canvas.height);\n    return this.canvas;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Point.js","export function loadImage(url) {\n  return new Promise(resolve => {\n    const image = new Image();\n    image.crossOrigin = 'Anonymous';\n\n    image.addEventListener('load', () => {\n      resolve(image);\n    });\n    image.src = url;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders.js"],"sourceRoot":""}